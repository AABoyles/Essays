<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Longevity</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.6/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.6/js/bootstrap.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/magnific-popup-1.1.0/magnific-popup.css" rel="stylesheet" />
<script src="site_libs/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script>
<link href="site_libs/readthedown-0.1/readthedown.css" rel="stylesheet" />
<script src="site_libs/readthedown-0.1/readthedown.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/htmlwidgets-0.8/htmlwidgets.js"></script>
<link href="site_libs/plotlyjs-1.16.3/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotlyjs-1.16.3/plotly-latest.min.js"></script>
<script src="site_libs/plotly-binding-4.5.6/plotly.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #dddddd; }
td.sourceCode { padding-left: 5px; }
code > span.kw { font-weight: bold; } /* Keyword */
code > span.dt { color: #800000; } /* DataType */
code > span.dv { color: #0000ff; } /* DecVal */
code > span.bn { color: #0000ff; } /* BaseN */
code > span.fl { color: #800080; } /* Float */
code > span.ch { color: #ff00ff; } /* Char */
code > span.st { color: #dd0000; } /* String */
code > span.co { color: #808080; font-style: italic; } /* Comment */
code > span.al { color: #00ff00; font-weight: bold; } /* Alert */
code > span.fu { color: #000080; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #ff0000; font-weight: bold; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #ff00ff; } /* SpecialChar */
code > span.vs { color: #dd0000; } /* VerbatimString */
code > span.ss { color: #dd0000; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { } /* ControlFlow */
code > span.op { } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { font-weight: bold; } /* Preprocessor */
code > span.at { } /* Attribute */
code > span.do { color: #808080; font-style: italic; } /* Documentation */
code > span.an { color: #808080; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #808080; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #808080; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="site_libs/style.css" type="text/css" />

</head>

<body>


<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Anthony A. Boyles</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Portfolio</a>
</li>
<li>
  <a href="../essays/">Essays</a>
</li>
<li>
  <a href="../code.html">Code</a>
</li>
<li>
  <a href="../about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../README.html">Meta</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="content" data-toggle="wy-nav-shift">

<!-- tabsets -->
<script src="/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<script src="/codefolding.js"></script>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<nav id="nav-top" role="navigation" aria-label="top navigation">
    <a role="button" href="#" data-toggle="wy-nav-top"><span class="glyphicon glyphicon-menu-hamburger"></span></a>
</nav>

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="text-muted">Code</span> <span class="text-muted caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All</a></li>
</ul>
</div>

<div id="header">
<h1 class="title">Longevity</h1>
</div>


<div id="table-of-contents">
    <h2><a href="#content">Longevity</a></h2>
    <div id="text-table-of-contents">
      <ul>
      <li><a href="#introduction">Introduction</a><ul>
      <li><a href="#interventions">Interventions</a></li>
      <li><a href="#definitions">Definitions</a></li>
      <li><a href="#prior-on-rrs">Prior on RRs</a></li>
      </ul></li>
      <li><a href="#vitamin-d">Vitamin D</a><ul>
      <li><a href="#background">Background</a></li>
      <li><a href="#causality">Causality</a></li>
      <li><a href="#benefit">Benefit</a></li>
      <li><a href="#cost">Cost</a></li>
      <li><a href="#cost-benefit">Cost-benefit</a></li>
      </ul></li>
      <li><a href="#metformin">Metformin</a><ul>
      <li><a href="#benefit-1">Benefit</a></li>
      <li><a href="#cost-1">Cost</a></li>
      <li><a href="#cost-benefit-1">Cost-benefit</a></li>
      <li><a href="#sensitivity-1">Sensitivity</a></li>
      <li><a href="#tame-power-analysis">TAME power analysis</a></li>
      </ul></li>
      <li><a href="#nicotinamide-riboside">Nicotinamide Riboside</a></li>
      <li><a href="#pterostilbene">Pterostilbene</a></li>
      <li><a href="#rapamycin">Rapamycin</a></li>
      <li><a href="#bisphosphonates">Bisphosphonates</a></li>
      <li><a href="#alcohol">Alcohol</a></li>
      <li><a href="#caloric-restriction">Caloric Restriction</a></li>
      <li><a href="#castration">Castration</a></li>
      <li><a href="#coffee">Coffee</a></li>
      <li><a href="#links-for-future-investigation">Links for Future Investigation</a></li>
      <li><a href="#references">References</a></li>
      </ul>
    </div>
</div>

<div id="main">
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;parallel&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;magrittr&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;readr&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;plyr&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;dplyr&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;tidyr&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;purrr&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;intubate&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;metafor&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;BayesianFirstAid&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;bayesmeta&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;plotly&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;knitr&quot;</span>)
knitr::opts_chunk$<span class="kw">set</span>(<span class="dt">message =</span> <span class="ot">FALSE</span>, <span class="dt">warning =</span> <span class="ot">FALSE</span>, <span class="dt">error =</span> <span class="ot">FALSE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">&quot;infobox.R&quot;</span>)
<span class="kw">infobox</span>(<span class="kw">list</span>(
  <span class="st">&quot;Status&quot;</span> =<span class="st"> &quot;Incomplete&quot;</span>,
  <span class="st">&quot;Epistemic Status&quot;</span> =<span class="st"> &quot;Speculative&quot;</span>,
  <span class="st">&quot;Fork of&quot;</span> =<span class="st"> </span>tags$<span class="kw">a</span>(<span class="dt">href=</span><span class="st">&#39;http://www.gwern.net/Longevity&#39;</span>, <span class="st">&quot;Gwern&#39;s Longevity&quot;</span>),
  <span class="st">&quot;First Revision&quot;</span> =<span class="st"> &quot;2016-10-14&quot;</span>,
  <span class="st">&quot;Last Revision&quot;</span> =<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">file.info</span>(<span class="st">&quot;drafts/Longevity.Rmd&quot;</span>)$mtime)
))</code></pre></div>
<div class="infobox">
<table class="infoboxtable">
<tbody>
<tr>
<td>
<b>Status</b>
</td>
<td>Incomplete</td>
</tr>
<tr>
<td>
<b>Epistemic Status</b>
</td>
<td>Speculative</td>
</tr>
<tr>
<td>
<b>Fork of</b>
</td>
<td>
<a href="http://www.gwern.net/Longevity">Gwern's Longevity</a>
</td>
</tr>
<tr>
<td>
<b>First Revision</b>
</td>
<td>2016-10-14</td>
</tr>
<tr>
<td>
<b>Last Revision</b>
</td>
<td>NA</td>
</tr>
</tbody>
<tfoot></tfoot>
</table>
</div>
<p>I want to live for a very long time.</p>
<p>There are, broadly speaking, two ways to extend lives. One is public health. To extend lives using public health, go to an actuarial table and ask “Which of these causes of death can be mitigated?” Then pick one, like car accidents and figure out how to stop people from dying in car accidents. Invent seatbelts and airbags, and then convince governments to make laws forcing people to use seatbelts and airbags. And then people start dying less from car accidents, and you’ve extended their lives.</p>
<p>The people doing public health are really, <strong>really</strong> good at it. <a href="https://ourworldindata.org/life-expectancy/#life-expectancy-has-improved-globally">Average human lifespans are increasing all over the world</a>, almost entirely due to victories in public health. People are <a href="https://data.oecd.org/healthcare/child-vaccination-rates.htm">getting vaccinated</a>. Eating better food. Breathing less of fewer toxic things. Drinking cleaner water. Breastfeeding. <a href="https://en.wikipedia.org/wiki/The_Better_Angels_of_Our_Nature">Hurting each other less</a>.</p>
<p>Basically, public health is awesome, and we should be handing out WAY more money and medals to people doing public health. However, interventions of the type advocated by the public health community generally (so far) can only get people as far as old age <span class="citation">Olshansky, Carnes, and Cassel (1990)</span>. After a point, seatbelts and clean water aren’t going to make a huge difference, because you’re probably going to die of a natural cause like heart failure or some sort of cancer <span class="citation">Werfel, Ingber, and Bar-Yam (2015)</span>.</p>
<p>So, the other way to extend lives is to stop people from dying of natural causes. We don’t know very well how to make that happen, but we have <a href="https://en.wikipedia.org/wiki/Strategies_for_Engineered_Negligible_Senescence">a research agenda</a> that (we hope) can figure it out <span class="citation">Grey and Rae (2007)</span>. Moreover, there are a lot of people who got rich, decided they want to live for a really long time too, and set up <a href="https://www.calicolabs.com/">well-funded companies</a> and <a href="http://glennfoundation.org/">non-profits</a> to search for other avenues to life extension. In the meanwhile, there are a small number of odd things that we have reasonable evidence extends lifespans.</p>
<p>After more than a century of concerted effort and tinkering with a bewildering variety of thousands of interventions, it can safely be said that almost all attempted interventions have failed, so the prior odds are strongly against any new one working. Even so, for those of us who want to give ourselves a fighting shot at extreme longevity, even tiny longevity advantages may be worthwhile. That’s because we don’t know how soon the big breakthrough will come that enables our oldest people to roar through their early 120’s. If you’re alive when the breathrough does happen, that gives you a non-zero probability of benefitting from it, and living a long time yourself. Alternately, if you die before the big breakthrough, you’re almost certainly not going to benefit from it.</p>
<p>So it’s worth exploring whether certain interventions will result in a net improvement in your probability of living long enough to live indefinitely. However, this probability is likely to come at a non-trivial cost. As <a href="https://en.wikiquote.org/wiki/Clement_Freud#Sourced">Clement Freud once said</a>, “If you resolve to give up smoking, drinking and loving, you don’t actually live longer; it just seems longer.” (see also: <a href="http://www.spencergreenberg.com/2013/10/which-risks-of-dying-are-worth-taking/">“Which Risks of Dying Are Worth Taking?”</a>)</p>
<p>What I want to figure out is how to reduce all-cause mortality (ACM) as estimated in randomized trials on healthy adult human populations for which there are enough trials to do a random-effects/multilevel model, so I can estimate a posterior predictive interval of the benefit of an intervention, letting me compare mortality reduction with intervention cost, from which I can compute an expected value. Whew, that’s a head-full. Let’s break out those constraints individually:</p>
<p><em>1. reduce “all-cause mortality”,</em></p>
<p>ACM is the end-point of choice for life-extension because it is both closest to what we care about (additional life) and it is the hardest of all end-points - it is difficult to cheat, miscount, or not notice, and by being simple, consistent, and unambiguous, avoids many failure modes such as subgroup hacking or dropping outliers or tweaking covariates (either a larger fraction of the controls are dead or not). It can also typically be extracted from most studies, even if they otherwise fail to report much of the data.</p>
<p>Average reduction in all-cause mortality is also excellent for ignoring any zero-sum tradeoffs: it’s no good if reported benefits are only because the doctors writing up a trial kept slicing deaths by different categorizations of causes until they finally found a <em>p</em>&lt;0.05 or if the gains only appear by excluding some deaths as ‘irrelevant’ or if the gains in one cause of death comes at the expense of another cause (is it really helpful to avoid death by heart attack if the intervention just means you die of cancer instead?).</p>
<p>From a life-extension perspective, it is irrelevant if an intervention reduces some kinds of diseases while making one much more prone to dying from routine causes such as injuries or minor operations under anesthesia (especially since, in modern societies, one is all-but certain to undergo some surgery at some point).</p>
<p>In short, an intervention either reduces all-cause mortality or it doesn’t.</p>
<p><em>2. as estimated in randomized trials,</em></p>
<p><a href="">Correlation is not causation</a> and correlates rarely turn out to be causal. With aging, the situation is especially severe since aging is the exponential increase in mortality with time as all bodily systems gradually begin to fail; one cannot simply take a correlation of some chemical with aging or mortality and expect an intervention on it to have more than a minute chance of making a difference, since most (if not nearly every) chemical or substance or biomarker will change with age.</p>
<p>The best way to insulate our conclusions from selection effects is to perform large, controlled experiments, rather than to rely upon natural data.</p>
<p><em>3. on healthy adult human populations</em></p>
<p>Studies of interventions in the sick are unhelpful, as any observable benefits from such an intervention hopefully come from the particular disorder being treated. One special challenge for this criteria is studies done in elderly populations. Because death rates amongst the elderly are so high, they offer higher power to detect reductions in mortality. However, that death rate is high because of the aging process itself, and so subjects will tend to have many chronic conditions and diseases as well. These confound otherwise useful results, and thus must be treated with some caution.</p>
<p>Animal studies are also unhelpful as <a href="">results tend to be unreliable across species</a>. One particularly noteworthy source of unreliability is that some species age in entirely different ways than humans. Perhaps it is better to say that humans naturally live unusually long lives for animals, and thus age in very different ways than other organisms.</p>
<p><em>4. for which there are enough trials to do a random-effects/multilevel model, so we can extract a posterior predictive interval of the benefit,</em></p>
<p>It’s important to include heterogeneity from population to population as part of the uncertainty. One of the subtleties often missed in dealing with modeling is that a 95% CI around a parameter is not a CI around the outcome or result.</p>
<p><em>5. letting us compare mortality reduction against intervention cost,</em></p>
<p>For making decisions, the costs of the intervention must be taken into account. A taxing exercise regimen may be proven to increase longevity, but is that of any value of the regimen takes away much more of your life than it gives back? It may be that no matter whether our certainty is 99% or 99.99% that it works, we would never choose to embark on that regimen. On the other hand, for a cheap enough intervention, we may be willing to accept substantially lower probability: baby aspirin, for example, costs $7 &amp; &lt;10 seconds each morning / &lt;60 minutes a year and we might be willing to use it if our final probability of any benefit is a mere 50%.</p>
<p><em>6. then yielding an expected value of the intervention (and if &lt;$0, perhaps further analysis about whether it has a reasonable chance of ever becoming profitable and what the Value of Information might be of further trials)</em></p>
<p>If an intervention passes all these criteria, we can be highly confident that we will gain life, rather than lose it.</p>
<p>Of course, these criteria are stringent: we can, for example, exclude almost everything which might appear in an issue of Life Extension Magazine for being too small, conducted on animals or sick people, not being a randomized experiment, or reporting benefits only on an extremely specific biological endpoint like some cholesterol-related metric you’ve never heard of. Medical journals don’t offer rich pickings either, as they understandably tend to focus on experiments done in sick people rather than healthy people (apparently there’s more funding for the former - who knew?). And when a randomized experiment <em>is</em> done in healthy adult humans, the experiment may either be too small or have run for too short a time, since annual mortality rates for many participant groups are 1% or less; for any sort of effect to show up, you want (very expensive, very rare) studies which enroll at least a thousand subjects for a decade or more. It would not be surprising if we must intone the ritual ending to all Cochrane Reviews, “there is insufficient evidence for a recommendation”.</p>
<p>Unfortunately, there are precious few interventions which meet these stringent requirements. Accordingly, I’ll be looking at many interventions for which there is <strong>some</strong> evidence which does not meet this rigorous set of expectations.</p>
<div id="interventions" class="section level2">
<h2>Interventions</h2>
<p>Evaluated Supplements/Medications:</p>
<ul>
<li><a href="#vitamin-d">Vitamin D3</a></li>
<li><a href="#metformin">Metformin</a></li>
</ul>
<p>Possible Supplements/Medications:</p>
<ul>
<li><a href="https://www.google.com/search?q=caffeine+all+cause+mortality">Aspirin</a></li>
<li><a href="http://en.wikipedia.org/wiki/rapamycin">Rapamycin</a></li>
<li><a href="">Nicotinamide Riboside</a></li>
<li><a href="">Resveratrol</a></li>
<li><a href="">Pterostilbene</a></li>
<li><a href="http://en.wikipedia.org/wiki/Bisphosphonate">Bisphosphonate</a></li>
<li><a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=22828954">D-Glucosamine</a></li>
<li><a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=24259558">Magnesium</a></li>
<li><a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=21301855">Lithium Chloride</a></li>
<li><a href="">Omega 3</a></li>
<li><a href="">Acetyl L-Carnitine</a></li>
<li><a href="">Phosphatidylcholine</a></li>
</ul>
<p>Possible Dietary Modifications:</p>
<ul>
<li><a href="http://www.nejm.org/action/showImage?doi=10.1056%2FNEJMoa1200303&amp;iid=f01">Mediterranean Diet</a></li>
<li><a href="http://en.wikipedia.org/wiki/caloric%20restriction">Caloric Restriction</a></li>
<li><a href="http://www.nejm.org/doi/full/10.1056/NEJMoa1112010#t=article">Coffee/Caffeine</a></li>
<li><a href="http://en.wikipedia.org/wiki/Long-term%20effects%20of%20alcohol%20consumption">Alcohol</a></li>
<li><a href="">Nuts</a></li>
</ul>
<p>Possible Lifestyle Modifications:</p>
<ul>
<li><a href="">Aerobic Exercise</a></li>
<li><a href="">Resistance Exercise</a></li>
<li><a href="http://en.wikipedia.org/wiki/Castration%23Medical%20consequences">Castration</a></li>
<li><a href="">General Risk Reduction</a></li>
</ul>
<p>In the exceedingly unlikely case that I exhaust all of these, there’s the…</p>
<ul>
<li><a href="http://geroprotectors.org/">Geroprotectors Database</a></li>
</ul>
</div>
<div id="definitions" class="section level2">
<h2>Definitions</h2>
<div id="value-of-life" class="section level3">
<h3>Value of Life</h3>
<p>The valuation of one year of life I am using here <a href="http://en.wikipedia.org/wiki/Value%20of%20life%23Life%20Value%20in%20the%20US" title="Wikipedia: Value of life#Life Value in the US">is $50,000</a>, due to its commonness and conservativeness (some valuations are much higher, and so favor the use of interventions with much lower certainty thresholds).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#If you&#39;d like to see how differently valuing your life-years changes the outcomes, just change this variable:</span>
valueOfDALY &lt;-<span class="st"> </span><span class="dv">50000</span></code></pre></div>
</div>
<div id="population-survival-curve" class="section level3">
<h3>Population survival curve</h3>
<p>To work with life expectancies and changes in it, let’s compute a standard <a href="http://en.wikipedia.org/wiki/Gompertz%20curve">Gompertz curve</a> model of age-related mortality, using a the <a href="https://www.ssa.gov/oact/STATS/table4c6.html">US Social Security Administration’s 2013 Actuarial Tables</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gendered_actuarial &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;../data-cache/actuarial.csv&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">gather</span>(<span class="st">&quot;Gender&quot;</span>, <span class="st">&quot;SurvivingFraction&quot;</span>, <span class="st">`</span><span class="dt">Male Number of lives</span><span class="st">`</span>, <span class="st">`</span><span class="dt">Female Number of lives</span><span class="st">`</span>) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(
    <span class="dt">Gender =</span> <span class="kw">ifelse</span>(Gender ==<span class="st"> &quot;Male Number of lives&quot;</span>, <span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>),
    <span class="dt">SurvivingFraction =</span> SurvivingFraction
  )

<span class="kw">plot_ly</span>(gendered_actuarial, <span class="dt">x =</span> ~Age, <span class="dt">y =</span> ~SurvivingFraction/<span class="dv">100000</span>, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines&#39;</span>, <span class="dt">color =</span> ~Gender)</code></pre></div>
<div id="htmlwidget-9b3d3156d9749a2f5b97" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-9b3d3156d9749a2f5b97">{"x":{"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"Age"},"yaxis":{"domain":[0,1],"title":"SurvivingFraction/1e+05"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"modeBarButtonsToRemove":["sendDataToCloud"]},"data":[{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119],"y":[1,0.99462,0.99425,0.99403,0.99387,0.99373,0.99361,0.99351,0.99341,0.99331,0.99322,0.99312,0.99303,0.99291,0.99278,0.99262,0.99243,0.9922,0.99194,0.99165,0.99132,0.99095,0.99054,0.9901,0.98963,0.98915,0.98864,0.98811,0.98755,0.98697,0.98635,0.98569,0.985,0.98426,0.98348,0.98265,0.98176,0.98081,0.97979,0.9787,0.97753,0.97627,0.97491,0.97343,0.97182,0.97004,0.9681,0.96597,0.96364,0.96109,0.95829,0.95524,0.95193,0.94834,0.94449,0.94038,0.93598,0.93126,0.92623,0.9209,0.91526,0.90927,0.90287,0.896,0.88858,0.88054,0.87177,0.86223,0.85187,0.84069,0.82864,0.81561,0.80147,0.78616,0.76961,0.75177,0.73244,0.71148,0.68888,0.66467,0.6388,0.61114,0.58159,0.55016,0.51694,0.48205,0.44565,0.40796,0.36933,0.33017,0.29104,0.25257,0.21542,0.18027,0.14775,0.11839,0.09267,0.07083,0.05285,0.03852,0.02745,0.01909,0.01292,0.0085,0.00541,0.00333,0.00197,0.00112,0.00061,0.00031,0.00015,7e-05,3e-05,1e-05,0,0,0,0,0,0],"mode":"lines","type":"scatter","name":"Female","line":{"fillcolor":"rgba(102,194,165,0.5)","color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y"},{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119],"y":[1,0.99348,0.99302,0.99273,0.99252,0.99235,0.99219,0.99205,0.99192,0.9918,0.9917,0.99161,0.99151,0.99138,0.99119,0.99091,0.99052,0.99003,0.98943,0.9887,0.98785,0.98685,0.98572,0.98449,0.98321,0.98191,0.9806,0.97928,0.97795,0.97659,0.97519,0.97376,0.9723,0.9708,0.96927,0.96772,0.96612,0.96448,0.96277,0.96097,0.95908,0.95708,0.95493,0.95262,0.95012,0.94739,0.94441,0.94115,0.93759,0.93368,0.9294,0.92472,0.91961,0.91406,0.90804,0.90153,0.8945,0.88693,0.87883,0.87022,0.86112,0.85147,0.84125,0.83042,0.81899,0.80691,0.79412,0.78054,0.76613,0.75084,0.73461,0.71732,0.69889,0.6793,0.65853,0.63657,0.61329,0.58859,0.56249,0.53504,0.50629,0.47621,0.44484,0.41233,0.3789,0.34482,0.3104,0.27598,0.24201,0.20896,0.17735,0.14768,0.12043,0.09599,0.07463,0.05647,0.04157,0.02977,0.02075,0.0141,0.00935,0.00605,0.0038,0.00232,0.00137,0.00078,0.00043,0.00023,0.00011,5e-05,2e-05,1e-05,0,0,0,0,0,0,0,0],"mode":"lines","type":"scatter","name":"Male","line":{"fillcolor":"rgba(141,160,203,0.5)","color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y"}],"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p>From this, we can see that women at every age have higher survival rates than men of the same age. However, rather than stratify everythin on gender, I’m just going to combine the two surviving groups. It’s a blunt approach, but it’s hardly the worst available option. Let’s compare this to an estimate of survival fractions of Dutch adults <span class="citation">Cramer, Kaas, and Others (2013)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">S &lt;-<span class="st"> </span>function(t, <span class="dt">RR=</span><span class="dv">1</span>) <span class="kw">exp</span>(-(RR*<span class="fl">0.000016443</span>)/<span class="kw">log</span>(<span class="fl">1.1124</span>) *<span class="st"> </span>(<span class="fl">1.1124</span>^t -<span class="st"> </span><span class="dv">1</span>))

actuarial &lt;-<span class="st"> </span>gendered_actuarial %&gt;%
<span class="st">  </span><span class="kw">select</span>(Age, Gender, SurvivingFraction) %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(Age) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">American =</span> <span class="kw">sum</span>(SurvivingFraction)/<span class="dv">200000</span>) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Dutch =</span> <span class="kw">S</span>(Age))

<span class="kw">plot_ly</span>(actuarial, <span class="dt">x =</span> ~Age) %&gt;%
<span class="st">  </span><span class="kw">add_trace</span>(<span class="dt">y =</span> ~Dutch, <span class="dt">name =</span> <span class="st">&quot;Dutch&quot;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines&#39;</span>) %&gt;%
<span class="st">  </span><span class="kw">add_trace</span>(<span class="dt">y =</span> ~American, <span class="dt">name =</span> <span class="st">&quot;American&quot;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines&#39;</span>)</code></pre></div>
<div id="htmlwidget-caf0c76a007a408a53de" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-caf0c76a007a408a53de">{"x":{"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"Age"},"yaxis":{"domain":[0,1],"title":"Dutch"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"modeBarButtonsToRemove":["sendDataToCloud"]},"data":[{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119],"y":[1,0.999982649456592,0.999963349065803,0.999941879748758,0.999917997822054,0.999891432236937,0.999861881509294,0.999829010305964,0.999792445649071,0.999751772695844,0.999706530046726,0.999656204529374,0.999600225400402,0.999537957900386,0.999468696090616,0.999391654892328,0.999305961240577,0.999210644255481,0.99910462432314,0.998986700967116,0.998855539378742,0.998709655460758,0.998547399223624,0.998366936357351,0.998166227783649,0.997943006973596,0.997694754794761,0.997418671628722,0.997111646475226,0.996770222732712,0.996390560316777,0.995968393748312,0.995498985811871,0.994977076352397,0.994396825745359,0.993751752542085,0.993034664759423,0.992237584251978,0.991351663577318,0.99036709474167,0.989273009197947,0.988057368462571,0.986706844726121,0.985206690860135,0.983540599274293,0.981690549161966,0.979636641796638,0.977356923718066,0.974827197888239,0.972020823219487,0.96890850329934,0.965458065681651,0.961634233807674,0.957398394494848,0.952708365020348,0.947518165170474,0.941777801269222,0.93543307118643,0.928425401705333,0.92069173244717,0.912164463846234,0.90277149046921,0.892436345282015,0.881078485254692,0.868613753876237,0.854955061566995,0.840013330362534,0.823698754195671,0.805922430037138,0.786598417256605,0.765646281744887,0.74299417618695,0.718582496640356,0.692368136162341,0.664329326271633,0.634471014035377,0.602830664202878,0.569484300351515,0.53455250605462,0.498205998456872,0.460670267609827,0.42222865552504,0.383223145308123,0.344052066160831,0.305163924713113,0.267046682516469,0.23021204973511,0.195174784890209,0.162427589417975,0.132412938987491,0.105494026685537,0.0819277724318186,0.0618433878069841,0.045230053443406,0.031936665658425,0.0216852375658263,0.0140974805246012,0.00873167319864039,0.00512470999149581,0.00283288266509258,0.00146504695709618,0.000703535024526321,0.00031110937832968,0.000125518864130516,4.57294898862422e-05,1.48728737718992e-05,4.26348306827367e-06,1.0620440785696e-06,2.26294202755708e-07,4.05257616938165e-08,5.98181030143671e-09,7.12100169808569e-10,6.67358463288582e-11,4.79302404973836e-12,2.56036919161488e-13,9.83984526151071e-15,2.62175807928244e-16,4.64766577822239e-18,5.23630042879872e-20,3.56316046236455e-22],"name":"Dutch","mode":"lines","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y"},{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119],"y":[1,0.99405,0.993635,0.99338,0.993195,0.99304,0.9929,0.99278,0.992665,0.992555,0.99246,0.992365,0.99227,0.992145,0.991985,0.991765,0.991475,0.991115,0.990685,0.990175,0.989585,0.9889,0.98813,0.987295,0.98642,0.98553,0.98462,0.983695,0.98275,0.98178,0.98077,0.979725,0.97865,0.97753,0.976375,0.975185,0.97394,0.972645,0.97128,0.969835,0.968305,0.966675,0.96492,0.963025,0.96097,0.958715,0.956255,0.95356,0.950615,0.947385,0.943845,0.93998,0.93577,0.9312,0.926265,0.920955,0.91524,0.909095,0.90253,0.89556,0.88819,0.88037,0.87206,0.86321,0.853785,0.843725,0.832945,0.821385,0.809,0.795765,0.781625,0.766465,0.75018,0.73273,0.71407,0.69417,0.672865,0.650035,0.625685,0.599855,0.572545,0.543675,0.513215,0.481245,0.44792,0.413435,0.378025,0.34197,0.30567,0.269565,0.234195,0.200125,0.167925,0.13813,0.11119,0.08743,0.06712,0.0503,0.0368,0.02631,0.0184,0.01257,0.00836,0.00541,0.00339,0.002055,0.0012,0.000675,0.00036,0.00018,8.5e-05,4e-05,1.5e-05,5e-06,0,0,0,0,0,0],"name":"American","mode":"lines","type":"scatter","line":{"fillcolor":"rgba(255,127,14,1)","color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y"}],"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p>Here we can see that Dutch people are less likely to die throughout early and middle age, but Americans are less likely to die later in life. This reversal happens sometime around age 67.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## the `min` is because past age 104, hazard&gt;1 which is wrong, so need a ceiling
H &lt;-<span class="st"> </span>function(t, RR) <span class="kw">min</span>(<span class="dv">1</span>, (RR*<span class="fl">0.000016443</span>)*<span class="fl">1.1124</span>^t)

## for each possible age, randomly sample a life event according to that age&#39;s hazard;
## then the subject dies at the age at which their first FALSE is found.
## So `TRUE,TRUE,TRUE,FALSE,TRUE,FALSE` ~&gt; died 4yo.
rgompertz &lt;-<span class="st"> </span>function(n, <span class="dt">RR=</span><span class="dv">1</span>) {
  ageHazards &lt;-<span class="st"> </span><span class="kw">sapply</span>(<span class="dv">0</span>:<span class="dv">120</span>, function(t) <span class="kw">H</span>(t, RR))
  <span class="kw">replicate</span>(n, <span class="kw">Position</span>(<span class="st">`</span><span class="dt">!</span><span class="st">`</span>, <span class="kw">sapply</span>(ageHazards, function(h) <span class="kw">sample</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">FALSE</span>), <span class="dv">1</span>, <span class="dt">prob=</span><span class="kw">c</span>(<span class="dv">1</span>-h, h)))))
}</code></pre></div>
</div>
<div id="converting-risk-reduction-to-average-life-expectancy-gain" class="section level3">
<h3>Converting risk reduction to average life expectancy gain</h3>
<p>A naive interpretation of a risk reduction (RR) is to treat it as though it can “restore” some number of years of life. Consider a someone with a life expectancy of around 80 years. Now let us suppose this person decides to start a life-extending activity with an RR of .85. The gain we might hope to get from this activity is <span class="math inline">\((1-.85)*80=12 \text{years}\)</span>. This is, sadly, strongly optimistically biased.</p>
<p>The Gompertz hazard curve can be multiplied by the RR to give a particular trajectory with that change in risk, and the mean can be obtained by integrating over a lifetime. Doing two such integrations, one with a baseline RR of 1 and one with the new RR, then gives the two different life expectancies, and their difference indicates the net gain/loss:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lifeExpectancy &lt;-<span class="st"> </span>function(RR, age1, age2) {
  <span class="kw">integrate</span>(function(t) <span class="kw">S</span>(t, RR) /<span class="st"> </span><span class="kw">S</span>(age1, RR), age1, age2)$value
}

lifeExpectancyGain &lt;-<span class="st"> </span>function(RR, <span class="dt">startingAge=</span><span class="dv">0</span>, <span class="dt">endingAge=</span><span class="ot">Inf</span>){
  <span class="kw">lifeExpectancy</span>(RR, startingAge, endingAge) -
<span class="st">  </span><span class="kw">lifeExpectancy</span>(<span class="dv">1</span>, startingAge, endingAge)
}

rrs &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.01</span>, <span class="dv">2</span>, <span class="dt">by=</span><span class="fl">0.01</span>)
gainsVsRR &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">RR=</span>rrs, <span class="dt">Gain=</span><span class="kw">sapply</span>(rrs, lifeExpectancyGain))

<span class="kw">plot_ly</span>(gainsVsRR, <span class="dt">x=</span>~RR, <span class="dt">y=</span>~Gain, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines&#39;</span>)</code></pre></div>
<div id="htmlwidget-88f5b1a9eadd20bf1138" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-88f5b1a9eadd20bf1138">{"x":{"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"RR"},"yaxis":{"domain":[0,1],"title":"Gain"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"modeBarButtonsToRemove":["sendDataToCloud"]},"data":[{"x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99,1,1.01,1.02,1.03,1.04,1.05,1.06,1.07,1.08,1.09,1.1,1.11,1.12,1.13,1.14,1.15,1.16,1.17,1.18,1.19,1.2,1.21,1.22,1.23,1.24,1.25,1.26,1.27,1.28,1.29,1.3,1.31,1.32,1.33,1.34,1.35,1.36,1.37,1.38,1.39,1.4,1.41,1.42,1.43,1.44,1.45,1.46,1.47,1.48,1.49,1.5,1.51,1.52,1.53,1.54,1.55,1.56,1.57,1.58,1.59,1.6,1.61,1.62,1.63,1.64,1.65,1.66,1.67,1.68,1.69,1.7,1.71,1.72,1.73,1.74,1.75,1.76,1.77,1.78,1.79,1.8,1.81,1.82,1.83,1.84,1.85,1.86,1.87,1.88,1.89,1.9,1.91,1.92,1.93,1.94,1.95,1.96,1.97,1.98,1.99,2],"y":[43.2198474542282,36.7128155533973,32.9065130553952,30.205943589093,28.1112543894229,26.3997887601828,24.9527971415367,23.6993718459061,22.5937882113979,21.6048246292256,20.7102114450815,19.8935055545009,19.1422197901975,18.4466477543611,17.7990948525248,17.1933580793069,16.6243637824289,16.087909123604,15.5804735347747,15.0990786219112,14.6411821239579,14.2045969305004,13.7874276832634,13.3880211455694,13.0049266444768,12.6368642686341,12.2826990762678,11.9414199960634,11.6121224321615,11.2939938193238,10.9863015475012,10.6883828041937,10.3996359803325,10.1195133594874,9.84751486709371,9.58318270044872,9.32609670352177,9.07587029331096,8.83214708553793,8.59459774218848,8.36291739688821,8.13682303004805,7.9160517787455,7.70035886109184,7.48951600040137,7.2833099738709,7.08154131735411,6.88402316650765,6.69058021743399,6.50104779233297,6.31527099768216,6.13310396416416,5.9544091589956,5.77905676253663,5.60692410210241,5.4378951367915,5.27185998791236,5.10871451024893,4.94835989997586,4.79070233552706,4.63565264814902,4.48312601924206,4.33304170191772,4.18532276448366,4.03989585381602,3.89669101491737,3.75564131967786,3.61668295814398,3.47975486346245,3.34479860497117,3.21175823860523,3.08058016776677,2.95121301379251,2.8236075748911,2.6977164037156,2.5734941518139,2.45089718291607,2.32988355002603,2.21041290933717,2.09244643956255,1.97594676627592,1.86087789089497,1.74720512396874,1.63489502246047,1.52391533074137,1.41423492503576,1.30582376107731,1.19865282475692,1.09269408555882,0.987920452598246,0.88430573308824,0.781824593076038,0.680452520302097,0.580165789045182,0.480941426827968,0.382757182865504,0.285591498148975,0.189423477063357,0.0942328604461551,0,-0.0932941660218631,-0.185668135931962,-0.277139866597565,-0.367726794367044,-0.457445854995314,-0.546313502624344,-0.634345727873153,-0.721558075085767,-0.80796565878471,-0.893583107818287,-0.978424869324485,-1.06250478599014,-1.14583640309631,-1.22843290787701,-1.31030714202852,-1.3914716136775,-1.47193850883492,-1.551719702363,-1.63082676847883,-1.70927099081898,-1.78706337208602,-1.86421464329814,-1.94073527266127,-2.01663547408174,-2.09192521533721,-2.16661422592186,-2.24071200458157,-2.31422782655336,-2.3871707505234,-2.459549625316,-2.53137309632648,-2.60264961170937,-2.67338742833302,-2.74359461751119,-2.81327907052159,-2.88244850392059,-2.95111042481886,-3.01927229379355,-3.08694129508564,-3.15412449573763,-3.22082881188639,-3.28706101302923,-3.35282772614023,-3.41813543964324,-3.48299050724715,-3.54739915164981,-3.61136746811501,-3.67490142792856,-3.73800688173792,-3.80068956278002,-3.86295509000195,-3.92480897107868,-3.98625660533173,-4.0473032865528,-4.10795420573611,-4.16821445372271,-4.2280890237605,-4.28758281398277,-4.34670062980877,-4.4054471862688,-4.4638271102571,-4.52184494271472,-4.5795051407455,-4.63681207966712,-4.69377005499996,-4.75038328439577,-4.80665590950838,-4.86259199780882,-4.91819554434626,-4.97347047345717,-5.02842063496045,-5.08304982600595,-5.13736176479888,-5.19136010894243,-5.24504845315437,-5.29843033070026,-5.3515092147864,-5.40428851991318,-5.4567716031908,-5.50896176561814,-5.56086225332632,-5.61247625878804,-5.66380692199357,-5.71485733159501,-5.76563052601924,-5.81612949455112,-5.86635717838743,-5.91631647166288,-5.96601022244883,-6.01544123372562,-6.06461226432945,-6.11352602987448,-6.16218520365103,-6.21059241750058,-6.2587502626681,-6.30666129063287,-6.35437931402929,-6.40180320426663,-6.4489384064743,-6.49588691301304],"mode":"lines","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y"}],"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Side note: it looks like a logarithmic curve. If we needed better computational performance, we could exploit this property to replace the integrals with cheaper arithmetic operations:</span>

gainlm &lt;-<span class="st"> </span>gainsVsRR %&gt;%
<span class="st">  </span><span class="kw">ntbt_lm</span>(Gain ~<span class="st"> </span><span class="kw">log</span>(RR))

lifeExpectancyGainApproximation &lt;-<span class="st"> </span>function(RR) <span class="kw">predict</span>(gainlm, <span class="kw">data.frame</span>(<span class="dt">RR=</span>RR))</code></pre></div>
<p>From this, we can see a much more realistic relationship between RR and life years gained. An RR of .85 delivers around ~1.6 years.</p>
<p>There is a fortunate upside to this phenomenon. If we wait to use an intervention until what might seem like ‘late’ in life, we will not have suffered a large opportunity cost (of ~40%) like one might think, but much less (~1.7%). The gains are minimal early on, and the opportunity cost only begins to really mount starting in one’s 50s or 60s, which has the important implication that such interventions will benefit younger people much less (at least when it comes to interventions which offer only a constant reduction in risk and do not affect the acceleration of mortality caused by the aging process itself) and so the risks are more likely to make interventions profitable.</p>
</div>
<div id="maximum-possible-profit" class="section level3">
<h3>Maximum possible profit</h3>
<p>More generally, it would be interesting to get an idea of what is the most profit possible for any particular reduction in ACM, by granting the most favorable possible assumptions: certainty that the RR is exact, that the intervention is side-effect-less and free both to start and continue, and it can begin at birth if need be. For the plausible range of RRs, 0.5-1.0:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">profitByAge &lt;-<span class="st"> </span>function(t, <span class="dt">RR=</span><span class="fl">0.85</span>, <span class="dt">yearValue=</span>valueOfDALY, annualCost, startCost, <span class="dt">probabilityPenalty=</span>(<span class="dv">1</span>/<span class="dv">3</span>)) {
  (<span class="kw">lifeExpectancyGain</span>(RR, <span class="dt">startingAge=</span>t) *
<span class="st">      </span>yearValue *
<span class="st">      </span>probabilityPenalty) -
<span class="st">  </span>(<span class="kw">lifeExpectancy</span>(RR,t,<span class="ot">Inf</span>) *
<span class="st">      </span>annualCost +
<span class="st">      </span>startCost)
}

rrs &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.5</span>,<span class="dv">1</span>,<span class="dt">by=</span><span class="fl">0.025</span>)

startAge &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="kw">data.frame</span>(
  <span class="dt">RR =</span> rrs,
  <span class="dt">Years         =</span> <span class="kw">sapply</span>(rrs, function(r) <span class="kw">lifeExpectancyGain</span>(r, startAge)),
  <span class="dt">MaximumProfit =</span> <span class="kw">sapply</span>(rrs, function(r) <span class="kw">profitByAge</span>(startAge, <span class="dt">RR=</span>r, <span class="dt">annualCost=</span><span class="dv">0</span>, <span class="dt">startCost=</span><span class="dv">0</span>, <span class="dt">probabilityPenalty=</span><span class="dv">1</span>))
) %&gt;%
<span class="st">  </span><span class="kw">kable</span>()</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">RR</th>
<th align="right">Years</th>
<th align="right">MaximumProfit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.500</td>
<td align="right">6.5010478</td>
<td align="right">325052.39</td>
</tr>
<tr class="even">
<td align="right">0.525</td>
<td align="right">6.0433308</td>
<td align="right">302166.54</td>
</tr>
<tr class="odd">
<td align="right">0.550</td>
<td align="right">5.6069241</td>
<td align="right">280346.21</td>
</tr>
<tr class="even">
<td align="right">0.575</td>
<td align="right">5.1899323</td>
<td align="right">259496.62</td>
</tr>
<tr class="odd">
<td align="right">0.600</td>
<td align="right">4.7907023</td>
<td align="right">239535.12</td>
</tr>
<tr class="even">
<td align="right">0.625</td>
<td align="right">4.4077835</td>
<td align="right">220389.17</td>
</tr>
<tr class="odd">
<td align="right">0.650</td>
<td align="right">4.0398959</td>
<td align="right">201994.79</td>
</tr>
<tr class="even">
<td align="right">0.675</td>
<td align="right">3.6859046</td>
<td align="right">184295.23</td>
</tr>
<tr class="odd">
<td align="right">0.700</td>
<td align="right">3.3447986</td>
<td align="right">167239.93</td>
</tr>
<tr class="even">
<td align="right">0.725</td>
<td align="right">3.0156734</td>
<td align="right">150783.67</td>
</tr>
<tr class="odd">
<td align="right">0.750</td>
<td align="right">2.6977164</td>
<td align="right">134885.82</td>
</tr>
<tr class="even">
<td align="right">0.775</td>
<td align="right">2.3901950</td>
<td align="right">119509.75</td>
</tr>
<tr class="odd">
<td align="right">0.800</td>
<td align="right">2.0924464</td>
<td align="right">104622.32</td>
</tr>
<tr class="even">
<td align="right">0.825</td>
<td align="right">1.8038691</td>
<td align="right">90193.46</td>
</tr>
<tr class="odd">
<td align="right">0.850</td>
<td align="right">1.5239153</td>
<td align="right">76195.77</td>
</tr>
<tr class="even">
<td align="right">0.875</td>
<td align="right">1.2520850</td>
<td align="right">62604.25</td>
</tr>
<tr class="odd">
<td align="right">0.900</td>
<td align="right">0.9879205</td>
<td align="right">49396.02</td>
</tr>
<tr class="even">
<td align="right">0.925</td>
<td align="right">0.7310014</td>
<td align="right">36550.07</td>
</tr>
<tr class="odd">
<td align="right">0.950</td>
<td align="right">0.4809414</td>
<td align="right">24047.07</td>
</tr>
<tr class="even">
<td align="right">0.975</td>
<td align="right">0.2373841</td>
<td align="right">11869.20</td>
</tr>
<tr class="odd">
<td align="right">1.000</td>
<td align="right">0.0000000</td>
<td align="right">0.00</td>
</tr>
</tbody>
</table>
<p>This provides upper bounds, and can help gauge plausibility of interventions for various variables - for example, if we were a 90-yo man considering embarking on caloric restriction, we might note that the upper bounds look like:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rrs &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.8</span>,<span class="dv">1</span>,<span class="dt">by=</span><span class="fl">0.05</span>)
startAge &lt;-<span class="st"> </span><span class="dv">90</span>
<span class="kw">data.frame</span>(
  <span class="dt">RR =</span> rrs,
  <span class="dt">Years         =</span> <span class="kw">sapply</span>(rrs, function(r) <span class="kw">lifeExpectancyGain</span>(r, startAge)),
  <span class="dt">MaximumProfit =</span> <span class="kw">sapply</span>(rrs, function(r) <span class="kw">profitByAge</span>(startAge, <span class="dt">RR=</span>r, <span class="dt">annualCost=</span><span class="dv">0</span>, <span class="dt">startCost=</span><span class="dv">0</span>, <span class="dt">probabilityPenalty=</span><span class="dv">1</span>))
) %&gt;%
<span class="st">  </span><span class="kw">kable</span>()</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">RR</th>
<th align="right">Years</th>
<th align="right">MaximumProfit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.80</td>
<td align="right">0.5791468</td>
<td align="right">28957.342</td>
</tr>
<tr class="even">
<td align="right">0.85</td>
<td align="right">0.4140092</td>
<td align="right">20700.459</td>
</tr>
<tr class="odd">
<td align="right">0.90</td>
<td align="right">0.2636940</td>
<td align="right">13184.698</td>
</tr>
<tr class="even">
<td align="right">0.95</td>
<td align="right">0.1262333</td>
<td align="right">6311.663</td>
</tr>
<tr class="odd">
<td align="right">1.00</td>
<td align="right">0.0000000</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p>Then we have to take into account the uncertainty that caloric restriction works at all in the extremely elderly (a halving is probably optimistic), the high probability its reduction in mortality will be relatively modest and in the 0.90s, the large financial &amp; time costs of safely doing such a stringent diet (easily thousands of dollars in time and higher-quality food ingredients), the need to learn new recipes and count calories, the possible side-effects like increasing <a href="http://en.wikipedia.org/wiki/Frailty%20syndrome" title="Wikipedia: Frailty syndrome">frailty</a> &amp; <a href="http://en.wikipedia.org/wiki/Sarcopenia" title="Wikipedia: Sarcopenia">muscle loss</a>. Given that the upper bound for plausible effect sizes is merely 1 year/$50k, it seems inadvisable for such a person to take up a Caloric Restriction Diet.</p>
<p>Using this approach, we can also reverse the question. Given an RR and a set of costs, we can determine what the optimal age to begin a regimen of life-extension activities.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">costToRR &lt;-<span class="st"> </span>function (<span class="dt">startingAge=</span><span class="dv">30</span>, annualCost, <span class="dt">startCost=</span><span class="dv">0</span>, <span class="dt">probabilityPenalty=</span><span class="dv">1</span>) {
  <span class="kw">uniroot</span>(<span class="dt">f=</span>function(r) {
    <span class="kw">profitByAge</span>(startingAge, <span class="dt">RR=</span>r, <span class="dt">annualCost=</span>annualCost, <span class="dt">startCost=</span>startCost,
                <span class="dt">probabilityPenalty=</span>probabilityPenalty)
  }, <span class="dt">lower=</span>.Machine$double.eps, <span class="dt">upper=</span><span class="dv">1</span>)$root
}</code></pre></div>
</div>
<div id="power-analysis" class="section level3">
<h3>Power analysis</h3>
<p>How many subjects does it take to detect a specified RR? This is useful for planning clinical trials but also in interpreting them. We can do simulation power analyses by using <code>rgompertz</code> to generate a number of subjects’ death dates for different RRs (eg 0.85 vs 1.0), counting how many deaths in each group fall within a specified followup period of years, and running some sort of analysis based on that data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gompertzSimulation &lt;-<span class="st"> </span>function(RR, n1, n2, startingAge, followupYears) {
  experimental       &lt;-<span class="st"> </span><span class="kw">Filter</span>(function(deathDate){deathDate&gt;=startingAge}, <span class="kw">rgompertz</span>(n1, RR))
  experimentalDeaths &lt;-<span class="st"> </span><span class="kw">Filter</span>(function(deathDate){deathDate&lt;=(startingAge+followupYears)}, experimental)

  control            &lt;-<span class="st"> </span><span class="kw">Filter</span>(function(deathDate){deathDate&gt;=startingAge}, <span class="kw">rgompertz</span>(n2, <span class="dv">1</span>))
  controlDeaths      &lt;-<span class="st"> </span><span class="kw">Filter</span>(function(deathDate){deathDate&lt;=(startingAge+followupYears)}, control)

  df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">RR=</span>RR, <span class="dt">Start=</span>startingAge, <span class="dt">Followup=</span>followupYears,
                   <span class="dt">N1=</span><span class="kw">length</span>(experimental), <span class="dt">N2=</span><span class="kw">length</span>(control),
                   <span class="dt">N1.deaths=</span><span class="kw">length</span>(experimentalDeaths), <span class="dt">N2.deaths=</span><span class="kw">length</span>(controlDeaths))
  <span class="kw">return</span>(<span class="kw">cbind</span>(df, <span class="kw">data.frame</span>(<span class="dt">RR.observed=</span>(df$N1.deaths/df$N1) /(df$N2.deaths/df$N2))))
}

gompertzPower &lt;-<span class="st"> </span>function(RR, n1, n2, startingAge, followupYears, <span class="dt">iters=</span><span class="dv">100</span>) {
  <span class="dv">1</span>:iters %&gt;%
<span class="st">    </span><span class="kw">mclapply</span>(function(i) <span class="kw">gompertzSimulation</span>(RR, n1, n2, startingAge, followupYears)) %&gt;%
<span class="st">    </span><span class="kw">ldply</span>()
}</code></pre></div>
<p>Given a function to estimate power for a particular set of trial characteristics, we can also search for the sample size which would make a trial (or fixed-effect meta-analysis) of particular RR effects well-powered as a heuristic for what sort of sample sizes we should expect (remembering that being well-powered is neither necessary nor optimal for decision-making):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#This is turned off because it takes a really long time to run.</span>
gompertzPowerSearch &lt;-<span class="st"> </span>function(RR, <span class="dt">startingAge=</span><span class="dv">50</span>, <span class="dt">followupYears=</span><span class="dv">10</span>, <span class="dt">targetPower=</span><span class="fl">0.8</span>, <span class="dt">startingN=</span><span class="dv">4000</span>, <span class="dt">iters=</span><span class="dv">100</span>, <span class="dt">increment=</span><span class="dv">200</span>){
  n &lt;-<span class="st"> </span>startingN
  nPower &lt;-<span class="st"> </span><span class="dv">0</span>
  while (nPower &lt;<span class="st"> </span>targetPower){
    n &lt;-<span class="st"> </span>n+increment
    sims &lt;-<span class="st"> </span><span class="kw">gompertzPower</span>(RR, n, n, startingAge, followupYears, iters)
    pvalues &lt;-<span class="st"> </span><span class="kw">sapply</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(sims), function(i) {
      <span class="kw">prop.test</span>(
        <span class="kw">c</span>(sims[i,]$N1.deaths, sims[i,]$N2.deaths),
        <span class="kw">c</span>(sims[i,]$N1, sims[i,]$N2),
      <span class="dt">alternative=</span><span class="st">&quot;less&quot;</span>)$p.value
    })
    nPower &lt;-<span class="st"> </span><span class="kw">sum</span>(pvalues&lt;=<span class="fl">0.05</span>) /<span class="st"> </span><span class="kw">length</span>(pvalues)
  }
  <span class="kw">return</span>(n)
}

startingN &lt;-<span class="st"> </span><span class="dv">4500</span>

for (RR in <span class="kw">seq</span>(<span class="fl">0.80</span>, <span class="fl">0.95</span>, <span class="dt">by=</span><span class="fl">0.01</span>)) {
  n &lt;-<span class="st"> </span><span class="kw">gompertzPowerSearch</span>(RR, <span class="dt">startingN =</span> startingN)
  startingN &lt;-<span class="st"> </span>n
  <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&quot;RR &quot;</span>, RR, <span class="st">&quot;; necessary sample: &quot;</span>, n))
}</code></pre></div>
</div>
</div>
<div id="prior-on-rrs" class="section level2">
<h2>Prior on RRs</h2>
<p>Useful interventions are rare and our analyses should incorporate a skeptical informative prior reflecting our knowledge that it is highly unlikely that any particular intervention will genuinely increase life expectancy; in particular, RRs &lt;0.5 (or &gt;2.0) are rare. Since there are no previous compilations of randomized effects for interventions on all-cause mortality in healthy people to use for priors, I fall back on general-purpose but still informative skeptical priors found to work well across many problems by <a href="http://projecteuclid.org/download/pdfview_1/euclid.aoas/1231424214" title="A weakly informative default prior distribution for logistic and other regression models">Gelman et al 2008</a> &amp; <a href="./doc/statistics/2015-pedroza.pdf" title="Performance of informative priors skeptical of large treatment effects in clinical trials: A simulation study">Pedroza et al 2015</a>: the Cauchy(0, 2.5^2) and Normal(0, 0.35^2) priors.</p>
</div>
</div>
<div id="vitamin-d" class="section level1">
<h1>Vitamin D</h1>
<p>A review of vitamin D meta-analyses reporting on all-cause mortality yields a meta-analytic result of <span class="math inline">\(RR\approx0.96\)</span> with little heterogeneity or signs of bias. Reproducing it as a Bayesian random-effects meta-analysis gives an 84% posterior predictive probability that <span class="math inline">\(RR&lt;1.0\)</span>. The expected life expectancy gain is 0.33 years or $16,800, while total cost of vitamin D supplementation is estimated at $761, for a profit of $15,300. The probability of being profitable is estimated to be 83%. The optimal age at which to begin supplementation is 24 years old.</p>
<div id="background" class="section level2">
<h2>Background</h2>
<p>Vitamins D2 and D3 have been researched intensively ever since their discovery for possible benefits for a range of problems, starting with rickets and expanding from there to everything under the sun. Interest in vitamin D is sparked by many correlational results showing low levels of vitamin D in modern Western populations (unsurprising, given how little time people spend in the sun compared to historically) and how low levels correlate and predict with all sorts of bad things - particularly all-cause mortality.</p>
<p>The downside is that the literature is so large and heterogeneous that it’s hard to deal with and for many of the uses investigated, there is conflicting evidence. We are fortunate, however: the large research area of bone fractures/<a href="http://en.wikipedia.org/wiki/Falls%20in%20older%20adults" title="Wikipedia: Falls in older adults">falls</a>/osteoporosis in the elderly (collectively, leading causes of death &amp; disability) means many (relatively) large RCTs in (relatively) healthy people are available with meaningful death rates reported. For particularly comprehensive reviews, see <a href="https://www.ncbi.nlm.nih.gov/books/NBK253540/" title="Vitamin D and Calcium: A Systematic Review of Health Outcomes (Update)">Newberry et al 2014</a> and <a href="http://www.bmj.com/content/348/bmj.g2035.full" title="Vitamin D and multiple health outcomes: umbrella review of systematic reviews and meta-analyses of observational studies and randomised trials">Theodoratou et al 2014</a>.</p>
<p>In addition, vitamin D3 also has considerable plausibility for being profitable: it can be taken in extremely large doses (&gt;10-100x normal daily doses) without much sign of toxicity (leading to a fair number of trials which ensure compliance by just injecting mega-doses of vitamin D every month or year), <a href="http://en.wikipedia.org/wiki/hypervitaminosis%20D">hypervitaminosis D</a> is rare and not usually fatal, side-effects are rare and minimal, it is already taken by many millions of healthy and sick people without noticeable problems, and vitamin D costs ~$15/year.</p>
</div>
<div id="causality" class="section level2">
<h2>Causality</h2>
<div id="meta-analyses" class="section level3">
<h3>Meta Analyses</h3>
<p>The overall thrust of the meta-analyses is that there is consistent and substantial evidence that regular vitamin D3 supplementation reduces all-cause mortality somewhere in the RR=0.90-1 range, that vitamin D2 may be worse but calcium seems irrelevant, and this effect seems to be general: the observable between-study heterogeneity is very small despite large differences in subject populations by gender, age, and dosage, and subgroup analyses do not find the effect confined to particular demographics or that a reduction in a particular disease is driving the ACM reduction (which while potentially due to lack of power, would be consistent with the generality of benefits in both the correlational and Mendelian randomization studies).</p>
<p>The most comprehensive meta-analysis by my count is Bolland et al 2014, which pools <em>k</em>=41 to get an estimate of RR 0.96 (0.93-1.00; <em>p</em>=0.04) based on an experimental death rate of 3824/40379=0.0947 vs control death rate of 3950/40794=0.0968. The meta-analysis itself can be reproduced given Bolland’s forest plot &amp; table, Figure 5.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vitaminD &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="st">&quot;Study&quot;</span>=<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Inkovaara&quot;</span>, <span class="st">&quot;Corless&quot;</span>, <span class="st">&quot;Ooms&quot;</span>, <span class="st">&quot;Lips A&quot;</span>, <span class="st">&quot;Komulainen&quot;</span>, <span class="st">&quot;Meyer&quot;</span>, <span class="st">&quot;Bischoff&quot;</span>, <span class="st">&quot;Cooper&quot;</span>, <span class="st">&quot;Latham&quot;</span>, <span class="st">&quot;Trivedi&quot;</span>, <span class="st">&quot;Avenell&quot;</span>, <span class="st">&quot;Harwood&quot;</span>, <span class="st">&quot;Aloia&quot;</span>, <span class="st">&quot;Flicker&quot;</span>, <span class="st">&quot;Grant&quot;</span>, <span class="st">&quot;Broe&quot;</span>, <span class="st">&quot;Burleigh&quot;</span>, <span class="st">&quot;Lappe&quot;</span>, <span class="st">&quot;Lyons&quot;</span>, <span class="st">&quot;Smith&quot;</span>, <span class="st">&quot;Björkman&quot;</span>, <span class="st">&quot;Chel&quot;</span>, <span class="st">&quot;Prince&quot;</span>, <span class="st">&quot;Zhu&quot;</span>, <span class="st">&quot;Lips B&quot;</span>, <span class="st">&quot;Sanders&quot;</span>, <span class="st">&quot;Glendenning&quot;</span>, <span class="st">&quot;Inkovaara&quot;</span>, <span class="st">&quot;Chapuy A&quot;</span>, <span class="st">&quot;Dawson-Hughes&quot;</span>, <span class="st">&quot;Baeksgaard&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Chapuy B&quot;</span>, <span class="st">&quot;Harwood&quot;</span>, <span class="st">&quot;Meier&quot;</span>, <span class="st">&quot;Brazier&quot;</span>, <span class="st">&quot;Grant&quot;</span>, <span class="st">&quot;Porthouse&quot;</span>, <span class="st">&quot;WHI trials&quot;</span>, <span class="st">&quot;Bolton-Smith&quot;</span>, <span class="st">&quot;Zhu&quot;</span>, <span class="st">&quot;Salovaara&quot;</span>),
 <span class="st">&quot;Year&quot;</span>=<span class="kw">c</span>(<span class="dv">1983</span>, <span class="dv">1985</span>, <span class="dv">1995</span>, <span class="dv">1996</span>, <span class="dv">1998</span>, <span class="dv">2002</span>, <span class="dv">2003</span>, <span class="dv">2003</span>, <span class="dv">2003</span>, <span class="dv">2003</span>, <span class="dv">2004</span>, <span class="dv">2004</span>, <span class="dv">2005</span>, <span class="dv">2005</span>, <span class="dv">2005</span>, <span class="dv">2007</span>, <span class="dv">2007</span>, <span class="dv">2007</span>, <span class="dv">2007</span>, <span class="dv">2007</span>, <span class="dv">2008</span>, <span class="dv">2008</span>, <span class="dv">2008</span>, <span class="dv">2008</span>, <span class="dv">2010</span>, <span class="dv">2010</span>, <span class="dv">2012</span>, <span class="dv">1983</span>, <span class="dv">1992</span>, <span class="dv">1997</span>, <span class="dv">1998</span>, <span class="dv">1999</span>, <span class="dv">2002</span>, <span class="dv">2004</span>, <span class="dv">2004</span>, <span class="dv">2005</span>, <span class="dv">2005</span>, <span class="dv">2005</span>, <span class="dv">2006</span>, <span class="dv">2007</span>, <span class="dv">2008</span>, <span class="dv">2010</span>),
  <span class="st">&quot;E.deaths&quot;</span>=<span class="kw">c</span>(<span class="dv">41</span>, <span class="dv">8</span>, <span class="dv">11</span>, <span class="dv">223</span>, <span class="dv">2</span>, <span class="dv">169</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">11</span>, <span class="dv">224</span>, <span class="dv">4</span>, <span class="dv">24</span>, <span class="dv">1</span>, <span class="dv">76</span>, <span class="dv">438</span>, <span class="dv">5</span>, <span class="dv">16</span>, <span class="dv">4</span>, <span class="dv">947</span>, <span class="dv">355</span>, <span class="dv">27</span>, <span class="dv">25</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">40</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">258</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">21</span>, <span class="dv">70</span>, <span class="dv">17</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">221</span>, <span class="dv">57</span>, <span class="dv">744</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">15</span>),
  <span class="st">&quot;E.n&quot;</span>=<span class="kw">c</span>(<span class="dv">181</span>, <span class="dv">41</span>, <span class="dv">177</span>, <span class="dv">1291</span>, <span class="dv">232</span>, <span class="dv">569</span>, <span class="dv">62</span>, <span class="dv">93</span>, <span class="dv">121</span>, <span class="dv">1345</span>, <span class="dv">70</span>, <span class="dv">113</span>, <span class="dv">104</span>, <span class="dv">313</span>, <span class="dv">2649</span>, <span class="dv">99</span>, <span class="dv">101</span>, <span class="dv">446</span>, <span class="dv">1725</span>, <span class="dv">4727</span>, <span class="dv">150</span>, <span class="dv">166</span>, <span class="dv">151</span>, <span class="dv">39</span>, <span class="dv">114</span>, <span class="dv">1131</span>, <span class="dv">353</span>, <span class="dv">353</span>, <span class="dv">1634</span>, <span class="dv">187</span>, <span class="dv">80</span>, <span class="dv">124</span>, <span class="dv">389</span>, <span class="dv">75</span>, <span class="dv">30</span>, <span class="dv">95</span>, <span class="dv">1306</span>, <span class="dv">1321</span>, <span class="dv">18176</span>, <span class="dv">62</span>, <span class="dv">39</span>, <span class="dv">1718</span>),
  <span class="st">&quot;C.deaths&quot;</span>=<span class="kw">c</span>(<span class="dv">26</span>, <span class="dv">8</span>, <span class="dv">21</span>, <span class="dv">251</span>, <span class="dv">2</span>, <span class="dv">163</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">247</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">85</span>, <span class="dv">460</span>, <span class="dv">2</span>, <span class="dv">13</span>, <span class="dv">18</span>, <span class="dv">953</span>, <span class="dv">354</span>, <span class="dv">9</span>, <span class="dv">33</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">47</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">274</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">26</span>, <span class="dv">43</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">217</span>, <span class="dv">68</span>, <span class="dv">807</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">13</span>),
  <span class="st">&quot;C.n&quot;</span>=<span class="kw">c</span>(<span class="dv">146</span>, <span class="dv">41</span>, <span class="dv">171</span>, <span class="dv">1287</span>, <span class="dv">232</span>, <span class="dv">575</span>, <span class="dv">60</span>, <span class="dv">94</span>, <span class="dv">122</span>, <span class="dv">1341</span>, <span class="dv">64</span>, <span class="dv">37</span>, <span class="dv">104</span>, <span class="dv">312</span>, <span class="dv">2643</span>, <span class="dv">25</span>, <span class="dv">104</span>, <span class="dv">734</span>, <span class="dv">1715</span>, <span class="dv">4713</span>, <span class="dv">68</span>, <span class="dv">172</span>, <span class="dv">151</span>, <span class="dv">81</span>, <span class="dv">112</span>, <span class="dv">1125</span>, <span class="dv">333</span>, <span class="dv">333</span>, <span class="dv">1636</span>, <span class="dv">202</span>, <span class="dv">80</span>, <span class="dv">124</span>, <span class="dv">194</span>, <span class="dv">37</span>, <span class="dv">25</span>, <span class="dv">97</span>, <span class="dv">1332</span>, <span class="dv">1993</span>, <span class="dv">18106</span>, <span class="dv">61</span>, <span class="dv">41</span>, <span class="dv">1714</span>),
  <span class="st">&quot;Calcium&quot;</span>=<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)
)

<span class="kw">rma</span>(<span class="dt">measure=</span><span class="st">&quot;RR&quot;</span>, <span class="dt">ai=</span>E.deaths, <span class="dt">bi=</span>(E.n-E.deaths), <span class="dt">ci=</span>C.deaths, <span class="dt">di=</span>(C.n-C.deaths), <span class="dt">data=</span>vitaminD, <span class="dt">method=</span><span class="st">&quot;REML&quot;</span>)</code></pre></div>
<pre><code>## 
## Random-Effects Model (k = 42; tau^2 estimator: REML)
## 
## tau^2 (estimated amount of total heterogeneity): 0 (SE = 0.0015)
## tau (square root of estimated tau^2 value):      0
## I^2 (total heterogeneity / total variability):   0.00%
## H^2 (total variability / sampling variability):  1.00
## 
## Test for Heterogeneity: 
## Q(df = 41) = 36.5200, p-val = 0.6699
## 
## Model Results:
## 
## estimate       se     zval     pval    ci.lb    ci.ub          
##  -0.0354   0.0186  -1.8990   0.0576  -0.0719   0.0011        . 
## 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Since I^2=0, this is equivalent to a fixed-effect meta-analysis:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rma</span>(<span class="dt">measure=</span><span class="st">&quot;RR&quot;</span>, <span class="dt">ai=</span>E.deaths, <span class="dt">bi=</span>(E.n-E.deaths), <span class="dt">ci=</span>C.deaths, <span class="dt">di=</span>(C.n-C.deaths), <span class="dt">data=</span>vitaminD, <span class="dt">method=</span><span class="st">&quot;FE&quot;</span>)</code></pre></div>
<pre><code>## 
## Fixed-Effects Model (k = 42)
## 
## Test for Heterogeneity: 
## Q(df = 41) = 36.5200, p-val = 0.6699
## 
## Model Results:
## 
## estimate       se     zval     pval    ci.lb    ci.ub          
##  -0.0354   0.0186  -1.8990   0.0576  -0.0719   0.0011        . 
## 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>(Oddly, the per-study mortality rates in the Bolland forest plot/table don’t add up to the claimed totals, but are short by a few dozen each; since the RR calculated by <code>metafor</code> works out to be about the same, I assume it has something to do with how Bolland decided to handle including multiple subgroups from studies and is not important.)</p>
<p>Turning from frequentist to Bayesian methods, we could take the fixed-effect at face-value and use a Bayesian proportion test, for example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">bayes.prop.test</span>(<span class="kw">c</span>(<span class="kw">sum</span>(vitaminD$E.deaths), <span class="kw">sum</span>(vitaminD$C.deaths)), <span class="kw">c</span>(<span class="kw">sum</span>(vitaminD$E.n), <span class="kw">sum</span>(vitaminD$C.n)))</code></pre></div>
<pre><code>## 
##  Bayesian First Aid proportion test
## 
## data: c(sum(vitaminD$E.deaths), sum(vitaminD$C.deaths)) out of c(sum(vitaminD$E.n), sum(vitaminD$C.n))
## number of successes:   4065,  4174
## number of trials:     42152, 42537
## Estimated relative frequency of success [95% credible interval]:
##   Group 1: 0.096 [0.094, 0.099]
##   Group 2: 0.098 [0.095, 0.10]
## Estimated group difference (Group 1 - Group 2):
##   0 [-0.0057, 0.0022]
## The relative frequency of success is larger for Group 1 by a probability
## of 0.2 and larger for Group 2 by a probability of 0.8 .</code></pre>
<p>Using BFA has the downside that an I^2=0 doesn’t guarantee that there is no heterogeneity (it’d be surprising if there wasn’t) and gives an overly narrow predictive distribution, and BFA doesn’t easily include our informative priors. We can switch to <a href="https://cran.r-project.org/web/packages/bayesmeta/index.html">bayesmeta</a> which is easier to use than JAGS since it’s built on metafor:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">brem &lt;-<span class="st"> </span><span class="kw">escalc</span>(<span class="dt">measure=</span><span class="st">&quot;RR&quot;</span>, <span class="dt">ai=</span>E.deaths, <span class="dt">bi=</span>(E.n-E.deaths), <span class="dt">ci=</span>C.deaths, <span class="dt">di=</span>(C.n-C.deaths), <span class="dt">data=</span>vitaminD) %&gt;%
<span class="st">          </span><span class="kw">bayesmeta</span>(<span class="dt">mu.prior.mean=</span><span class="dv">0</span>, <span class="dt">mu.prior.sd=</span><span class="fl">0.35</span>^<span class="dv">2</span>)
brem</code></pre></div>
<pre><code>##  &#39;bayesmeta&#39; object.
## 
## 42 estimates:
## 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
## 
## tau prior (improper):
## uniform(min=0, max=Inf) 
## 
## mu prior (proper):
## normal(mean=0, sd=0.1225)
## 
## ML and MAP estimates:
##                       tau          mu
## ML joint     2.742792e-06 -0.03540806
## ML marginal  0.000000e+00          NA
## MAP joint    4.776269e-06 -0.03459980
## MAP marginal 0.000000e+00 -0.03590424
## 
## marginal posterior summary:
##                  tau          mu
## mode      0.00000000 -0.03590424
## median    0.02518404 -0.03607130
## mean      0.03104982 -0.03615522
## sd        0.02543032  0.02251774
## 95% lower 0.00000000 -0.08014212
## 95% upper 0.08001681  0.00874825</code></pre>
<p>Converting from log RRs to RR:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">exp</span>(<span class="kw">c</span>(-<span class="fl">0.080152143106</span>, -<span class="fl">0.036152849917</span>, <span class="fl">0.008768546338</span>))</code></pre></div>
<pre><code>## [1] 0.9229759 0.9644929 1.0088071</code></pre>
<p>Posterior predictive distribution of RR values including heterogeneity</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rrPP &lt;-<span class="st"> </span><span class="kw">exp</span>(brem$<span class="kw">rposterior</span>(<span class="dv">1000</span>, <span class="dt">predict=</span><span class="ot">TRUE</span>)[,<span class="dv">2</span>])</code></pre></div>
<p>Probability that vitamin D will reduce all-cause mortality in unobserved populations:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(rrPP&lt;<span class="dv">1</span>) /<span class="st"> </span><span class="kw">length</span>(rrPP)</code></pre></div>
<pre><code>## [1] 0.846</code></pre>
</div>
</div>
<div id="benefit" class="section level2">
<h2>Benefit</h2>
<p>Expected life expectancy increase:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">RR &lt;-<span class="st"> </span><span class="kw">mean</span>(rrPP)
years &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">sapply</span>(rrPP, lifeExpectancyGain))
years *<span class="st"> </span>valueOfDALY</code></pre></div>
<pre><code>## [1] 17374.05</code></pre>
<p>Hence, vitamin D supplementation could be worth &lt;=$16.8k.</p>
</div>
<div id="cost" class="section level2">
<h2>Cost</h2>
<div id="financial" class="section level3">
<h3>Financial</h3>
<p>The meta-analyses do not have anything remotely near a consensus about dosage (nor do the correlational studies, despite much ink spilled), so it probably does not matter much. I have in the past purchased 360x5000IU vitamin D3 pills for <a href="http://amazon.com/gp/product/B0050MYHBQ/?tag=gwernnet-20" title="Doctor&#39;s Best Vitamin D3 5000iu Soft-gels, 360">$10.99</a>, for an annual cost of $11.14. Taking a single pill takes perhaps a sixth of a minute, which again we value at $8/hr. So if we began taking at age 30:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">moneyCost &lt;-<span class="st"> </span>(<span class="fl">10.99</span> /<span class="st"> </span><span class="dv">360</span>) *<span class="st"> </span><span class="dv">365</span>
timeCost &lt;-<span class="st"> </span>((<span class="dv">1</span>/<span class="dv">10</span>)/<span class="dv">60</span>) *<span class="st"> </span><span class="fl">365.25</span> *<span class="st"> </span><span class="dv">8</span>
vitaminDAnnualCost &lt;-<span class="st"> </span>moneyCost +<span class="st"> </span>timeCost
vitaminDTotalCost &lt;-<span class="st"> </span>vitaminDAnnualCost *<span class="st"> </span><span class="kw">lifeExpectancy</span>(RR, <span class="dv">30</span>, <span class="ot">Inf</span>)
vitaminDTotalCost</code></pre></div>
<pre><code>## [1] 760.861</code></pre>
<div id="dosage" class="section level4">
<h4>Dosage</h4>
<p>To go into some more detail about the dosing issue, ne of the more recent meta-analyses to discuss dose in connection with all-cause mortality, <a href="http://www.gwern.net/docs/vitamind/2014-autier.pdf">Autier 2014</a>, says</p>
<blockquote>
<p>…Results of meta-analyses and pooled analyses consistently showed that supplementation could significantly reduce the risk of all-cause mortality, with relative risks ranging from 0.93 to 0.96 (table 4). Most trials included elderly women and a sizeable proportion of individuals were living in institutions. Decreases in risks of death were not associated with trial duration and baseline 25(OH)D concentration. Mortality reductions in trials that used doses of 10-20 μg [400-800IU] per day of vitamin D seemed greater than were reductions noted with higher doses.(13,14)</p>
<ul>
<li>13. Bjelakovic G, Gluud LL, Nikolova D, et al. “Vitamin D supplementation for prevention of mortality in adults”. Cochrane Database Syst Rev 2011; 7: CD007470. [<a href="http://onlinelibrary.wiley.com/doi/10.1002/14651858.CD007469.pub2/pdf">2014</a> update]</li>
<li>14. Rejnmark L, Avenell A, Masud T, et al. <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3410276/">“Vitamin D with calcium reduces mortality: patient level pooled analysis of 70,528 patients from eight major vitamin D trials”</a>. J Clin Endocrinol Metab 2012; 97: 2670-81.</li>
</ul>
</blockquote>
<p>(1μg=40IU, so 10μg=400IU, 20μg=800IU, and 1250μg=5000IU.)</p>
<p>I’m not sure I agree. The mechanistic theory and correlations do not predict that 400IU is ideal, it doesn’t seem enough to get blood serum levels of 25(OH)D particularly higher, and I don’t read Rejnmark the same way: the <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3410276/figure/F3/">Figure 3 forest plot</a>, to me, shows that after correcting for Smith’s use of D2 rather than D3 (D2 usually performs worse), that there are too few studies using higher doses to make any kind of claim (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3410276/table/T1/">Table 1</a>; almost all the daily studies use &lt;=20μg), and the studies which we do have tend to point to higher being better within this restricted range of dosages.</p>
<p>That said, I cannot prove that 5k IU is equally or more effective, so if anyone is feeling risk-averse or dubious on that score, they should stick with 800IU doses.</p>
<p>A year of daily 800IU doses costs almost the same as higher IU dosages since the vitamin D itself is only a small part of the cost of manufacturing. Alternately, if one is unconcerned about the different between daily and more intermittent doses (reasoning that due to the fat-solubility it should not make any difference), one could take a 5k IU dose on a weekly basis, thereby cutting the annual dose cost from ~$11 to ~$2.</p>
</div>
</div>
<div id="side-effects" class="section level3">
<h3>Side-effects</h3>
<p>Due to rarity, effectively zero: the listed side-effects are all so rare or minor that I can’t come up with any reasonable estimate of cost.</p>
</div>
</div>
<div id="cost-benefit" class="section level2">
<h2>Cost-benefit</h2>
<p>Bringing it all together for a 30yo considering vitamin D:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">benefit &lt;-<span class="st"> </span><span class="kw">lifeExpectancyGain</span>(RR, <span class="dt">startingAge=</span><span class="dv">30</span>) *<span class="st"> </span>valueOfDALY
cost &lt;-<span class="st"> </span>vitaminDTotalCost
benefit -<span class="st"> </span>cost</code></pre></div>
<pre><code>## [1] 15841.53</code></pre>
<div id="optimal-age" class="section level3">
<h3>Optimal age</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ages &lt;-<span class="st"> </span><span class="kw">sapply</span>(<span class="dv">1</span>:<span class="dv">120</span>, function(startingAge) <span class="kw">profitByAge</span>(startingAge, RR, <span class="dt">annualCost =</span> vitaminDAnnualCost, <span class="dt">startCost =</span> <span class="dv">0</span>, <span class="dt">probabilityPenalty=</span><span class="dv">1</span>))
optimalAge &lt;-<span class="st"> </span><span class="kw">which.max</span>(ages)</code></pre></div>
<p>So the optimal age turns out to be around 24.</p>
</div>
<div id="sensitivity" class="section level3">
<h3>Sensitivity</h3>
<p>What RR would wipe out the gains from vitamin D, and how likely is an RR that pessimistic?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">zeroRR &lt;-<span class="st"> </span><span class="kw">costToRR</span>(<span class="dt">startingAge=</span>optimalAge, <span class="dt">annualCost=</span>vitaminDAnnualCost)
<span class="kw">sum</span>(rrPP&lt;zeroRR) /<span class="st"> </span><span class="kw">length</span>(rrPP)</code></pre></div>
<pre><code>## [1] 0.833</code></pre>
<p>The window of unprofitability is so narrow that it doesn’t much change the probability.</p>
</div>
</div>
</div>
<div id="metformin" class="section level1">
<h1>Metformin</h1>
<p><a href="http://en.wikipedia.org/wiki/Metformin">Metformin</a> is a standard drug prescribed to diabetics since the 1950s, known for helping control blood sugar while being cheap and safe; it has been used by scores of millions of people. Alongside the blood sugar benefits, there appear to be other benefits relating to cancer and cardiovascular health, and possibly even all-cause mortality. There is enough public interest that I heard of it, and as it passes the sniff test, I decided to look into it further.</p>
<p>Overall, metformin is promising and under my set of assumptions, profitable for people aged &gt;=45yo to use. This, however, entirely hinges on one’s evaluation of the credibility of the correlational evidence and ability to tolerate the surprisingly common &amp; unpleasant side-effects like diarrhea.</p>
<div id="causality-1" class="section level3">
<h3>Causality</h3>
<p>Metformin has not been much tested in healthy adult populations, although there are a few anecdotes of prophylactic use (eg <a href="http://www.nytimes.com/2016/05/15/magazine/warburg-effect-an-old-idea-revived-starve-cancer-to-death.html" title="&#39;I think there&#39;s no doubt that insulin is pro-cancer&#39;, Watson says, with respect to the link between obesity, diabetes and cancer. &#39;It&#39;s as good a hypothesis as we have now.&#39; Watson takes metformin for cancer prevention; among its many effects, metformin works to lower insulin levels.">James Watson</a>) and a good deal of media attention has been given to a trial planned to launch in 2016: “Targeting Aging with Metformin” (TAME; <a href="http://news.sciencemag.org/biology/2015/09/feature-man-who-wants-beat-back-aging" title="The man who wants to beat back aging: Nir Barzilai hopes to persuade FDA to bless the proposed anti-aging trial, which is unconventional in its goals and design.">profile of proponent Barzilai</a>, <a href="http://healthspancampaign.org/2015/04/28/dr-nir-barzilai-on-the-tame-study/">interview</a>, <a href="http://www.nature.com/news/anti-ageing-pill-pushed-as-bona-fide-drug-1.17769" title="Anti-ageing pill pushed as bona fide drug: Regulators asked to consider ageing a treatable condition"><em>Nature</em> article</a>, <a href="./docs/2016-barzilai.pdf" title="Metformin as a Tool to Target Aging">Barzilai et al 2016</a> advocacy paper). There are some meta-analyses of past clinical trials of diabetic patients, which include estimates for ACM. Interpretation is difficult due to generally small numbers of deaths, differences in what metformin was being compared to, and the generally diseased subjects, but the picture looks mixed:</p>
<ol style="list-style-type: decimal">
<li><p>Saenz et al 2005, <a href="http://onlinelibrary.wiley.com/doi/10.1002/14651858.CD002966.pub3/epdf/standard">“Metformin monotherapy for type 2 diabetes mellitus”</a>; withdrawn by the Cochrane Collaboration (apparently due to obsolescence)</p></li>
<li><p>Selvin et al 2008, <a href="https://archinte.jamanetwork.com/article.aspx?articleid=414585">“Cardiovascular outcomes in trials of oral diabetes medications: a systematic review”</a></p></li>
</ol>
<p>Metformin vs anything, RR=0.81.</p>
<ol start="3" style="list-style-type: decimal">
<li>Lamanna et al 2011, <a href="./docs/2011-lamanna.pdf">“Effect of metformin on cardiovascular events and mortality: a meta-analysis of randomized clinical trials”</a></li>
</ol>
<p>RR=0.97 in active-comparator trials and 1.074 in placebo trials; overall, too underpowered to detect ACM of the plausible effect sizes but did find a trend towards larger reductions in longer trials.</p>
<ol start="4" style="list-style-type: decimal">
<li>Stevens et al 2012, <a href="http://www.researchgate.net/profile/Ambady_Ramachandran/publication/232280792_Erratum_to_Cancer_outcomes_and_all-cause_mortality_in_adults_allocated_to_metformin_systematic_review_and_collaborative_meta-analysis_of_randomised_clinical_trials/links/0046351edfcba31994000000.pdf">“Cancer outcomes and all-cause mortality in adults allocated to metformin: systematic review and collaborative meta-analysis of randomised clinical trials”</a></li>
</ol>
<p>ACM was split by comparison to placebo and comparison to another diabetic drug: 0.97 &amp; 0.94.</p>
<p>Some of the biochemical &amp; <a href="./docs/2011-bulterijs.pdf" title="&#39;Metformin As a Geroprotector&#39;, Bulterijs 2011 [review]">animal experimental background</a> suggesting benefits may be generalizability to healthy people, <a href="http://impactaging.com/papers/v4/n5/full/100455.html" title="&#39;Metformin in obesity, cancer and aging: addressing controversies&#39;, Berstein 2012">with</a> <a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3906334/" title="&#39;Metformin: Do we finally have an anti-aging drug?&#39;, Anisimov 2013">proposals</a> that metformin is mimicking <a href="http://en.wikipedia.org/wiki/caloric%20restriction" title="Wikipedia: caloric restriction">caloric restriction</a> by subtly reducing efficiency of mitochondria, making the body think it is in a food-scarce state. TAME seems to be prompted in part by Bannister et al 2014, <a href="http://www.researchgate.net/profile/Guntram_Schernthaner/publication/266679685_Can_people_with_type_2_diabetes_live_longer_than_those_without_A_comparison_of_mortality_in_people_initiated_with_metformin_or_sulphonylurea_monotherapy_and_matched_nondiabetic_controls/links/53eb336a0cf28f342f451c33.pdf">“Can people with type 2 diabetes live longer than those without? A comparison of mortality in people initiated with metformin or sulphonylurea monotherapy and matched, non-diabetic controls”</a>, a very large but nevertheless correlative result. There also appears to not be much consistency in the correlation results, with competing meta-analyses on various permutations of comparisons.</p>
<p>So I will apply my proposed correlation!=causality correction of 33% to deflate the expected value.</p>
</div>
<div id="benefit-1" class="section level2">
<h2>Benefit</h2>
<p>We know metformin won’t increase lifespans by 40% like some mice or make one live to 120, and probably also offers only a constant reduction in risk without decreasing the acceleration of risk, if for no other reason than hundreds of millions of people have taken metformin over the past century yet no gerontologist has ever noticed a massive overrepresentation of diabetics among centenarians. The actual effect size estimates from the abstract of Bannister et al 2014 (emphasis added):</p>
<blockquote>
<p>We identified 78 241 subjects treated with metformin, 12 222 treated with sulphonylurea, and 90 463 matched subjects without diabetes. This resulted in a total, censored follow-up period of 503 384 years. There were 7498 deaths in total, representing unadjusted mortality rates of 14.4 and 15.2, and 50.9 and 28.7 deaths per 1000 person-years for metformin monotherapy and their matched controls, and sulphonylurea monotherapy and their matched controls, respectively. With reference to observed survival in diabetic patients initiated with metformin monotherapy [survival time ratio (STR) = 1.0], adjusted median survival time was 15% lower (STR = <em>0.85</em>, 95% CI 0.81-0.90) in matched individuals without diabetes and 38% lower (0.62, 0.58-0.66) in diabetic patients treated with sulphonylurea monotherapy.</p>
</blockquote>
<p>STR isn’t quite an RR but it’s similar:</p>
<blockquote>
<p>The log-logistic model resulted in the best fit in terms of AIC, and the adequacy of this distribution was further assessed by plotting appropriately transformed non-parametric estimates against time. The log-logistic survival model provides beta coefficients that equal the difference in log survival time between groups or for continuous predictors. Exponentiation of the beta coefficient gives the ratio between median survival times, known as the survival time ratio (STR), or acceleration factor. STRs less than 1 represent a decrease in survival time; values greater than 1 represent prolonged survival.</p>
</blockquote>
<blockquote>
<p>In total, there were 7498 deaths, corresponding to an unadjusted event rate of 18.1 deaths per 1000 person-years. Unadjusted event rates were highest in the sulphonylurea group and lowest in the metformin group (50.9 vs. 14.4 per 1000 person-years, respectively; <em>p</em> &lt; 0.001; Table 2). Unadjusted event rates were higher in sulphonylurea-treated patients than in their matched, non-diabetic controls (50.9 vs. 28.7 per 1000 person-years, respectively; <em>p</em> &lt; 0.001) but, surprisingly, were lower in those treated with metformin than in their matched controls (14.4 vs. 15.2 per 1000 person-years, respectively; <em>p</em> = 0.054). Unadjusted event rates were lowest in people aged &lt;60 years at index date and highest for people aged &gt;70 years for both diabetic and control subjects.</p>
</blockquote>
<p>So I think if we wanted to convert to something else, STR has already done the denominator for us and we just divide to get the raw RR of 0.93, which is not as good as the quoted STR of 0.85 (0.81-0.90), indicating that the covariates do differ a bit systematically? Looking at table 1, the metformin group seems to have been previously treated for many more disorders, explaining why the models think metformin is so good (because the metformin users <em>should</em> be dying off faster yet have a similar death rate as the healthy controls) Table 2 gives overall figures for all-cause mortality: <em>n</em>=78241, 2663 deaths in metformin; <em>n</em>=78241, 2669 deaths in their controls. Pooling in the sulphonylurea controls as well: <em>n</em>=748 deaths plus the 2669 other controls, total controls <em>n</em>=90463, total deaths 3417 (3417&lt;=0.9010788188). So that verifies the RR of 0.93 since the difference between 0.90 and 0.93 is probably due to the differences in total followup years.</p>
<p>An RR of 0.85/0.90 gets us around a year, which converting to dollars:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lifeExpectancyGain</span>(<span class="fl">0.90</span>) *<span class="st"> </span>valueOfDALY</code></pre></div>
<pre><code>## [1] 49396.02</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lifeExpectancyGain</span>(<span class="fl">0.85</span>) *<span class="st"> </span>valueOfDALY</code></pre></div>
<pre><code>## [1] 76195.77</code></pre>
<p>Or $50k-$76k.</p>
<p>“Plans call for the trial to enrol 3,000 people aged 70-80 years at roughly 15 centres around the United States. The trial will take 5-7 years and cost US$50 million, Barzilai estimates, although it does not yet have funding.” There is also the Metformin in Longevity Study/MILES, but the <a href="https://clinicaltrials.gov/ct2/show/NCT02432287">pre-registration</a> indicates it will be aimed at gene expression changes and too short-term for mortality differences.</p>
</div>
<div id="cost-1" class="section level2">
<h2>Cost</h2>
<div id="financial-1" class="section level3">
<h3>Financial</h3>
<p>Metformin is said to be very cheap. How cheap is cheap?</p>
<p>Bannister et al 2014 doesn’t give dosages or look for a dose-response curve but since it’s drawing on clinical records, the diabetics must be using conventional dosages. <a href="http://www.drugs.com/dosage/metformin.html">Drugs.com</a> gives a maintenance dose of 2000mg/daily; the <a href="http://www.mayoclinic.org/drugs-supplements/metformin-oral-route/proper-use/drg-20067074">Mayo Clinic</a> says not usually more than 2000-2500mg/daily; the anti-aging quacks tend to suggest ~1000mg/daily for non-diabetics; the MILES protocol calls for 1700mg/daily. I’ll use 2000mg/daily here, which is 4x500mg doses.</p>
<p><a href="http://www.goodrx.com/metformin">GoodRx</a> says that a number of large American chains, including Walmart &amp; Target &amp; Sam’s Club, will sell 60x500mg for $4. It’s unclear if this includes sales tax, so I will tack on an additional 5% for that. This is 15 days’ worth at 2000mg/daily, so a month’s supply is $8.4, and an annual supply is $102. For the time/effort of regular consumption, I’ll estimate it at half a minute a day and $8/hr. (Metformin has <a href="http://www.medicines.org.uk/emc/medicine/23244/SPC">a shelf-life of 5 years</a> so at least in theory one could buy large batches and then the shopping time is trivial.) If we start at age 30, then without any discounting, we can expect to pay for metformin for a number of years (increased, of course, by our metformin usage):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">unitDoses &lt;-<span class="st"> </span>(<span class="dv">60</span>*<span class="dv">500</span>) /<span class="st"> </span><span class="dv">2000</span>
unitCost &lt;-<span class="st"> </span><span class="dv">4</span> *<span class="st"> </span><span class="fl">1.05</span>
annualPurchases &lt;-<span class="st"> </span><span class="fl">365.25</span> /<span class="st"> </span>unitDoses
moneyCost &lt;-<span class="st"> </span>unitCost *<span class="st"> </span>annualPurchases
timeCost &lt;-<span class="st"> </span>(<span class="fl">0.5</span>/<span class="dv">60</span>) *<span class="st"> </span><span class="dv">8</span> *<span class="st"> </span><span class="fl">365.25</span>
metforminAnnualCost &lt;-<span class="st"> </span>moneyCost +<span class="st"> </span>timeCost
metforminAnnualCost</code></pre></div>
<pre><code>## [1] 126.62</code></pre>
</div>
<div id="side-effects-1" class="section level3">
<h3>Side-effects</h3>
<p>The direct monetary cost of metformin is so minimal that it’s almost certainly outweighed by the inconvenience of purchasing &amp; regularly using it, and by any side-effects one might experience. <a href="https://en.wikipedia.org/wiki/Metformin#Adverse_effects">Side-effects</a> are a more serious concern: while considered safe and a net gain from the point of view of all-cause mortality, that just means the side-effects are <em>relatively</em> rare or nonfatal but metformin might still be unpleasant enough, or produce long-lasting reductions in quality of life which negate much of the gain. (It would not be much of an improvement to halve one’s risk if, in exchange, one becomes a quadriplegic.)</p>
<p><a href="http://www.drugs.com/sfx/metformin-side-effects.html">Drugs.com</a> provides some percentage breakdowns after noting that many problems can be avoided by gradual increases in dosage or go away spontaneously</p>
<blockquote>
<ul>
<li>Metabolic:
<ul>
<li>Common (1% to 10%): Hypoglycemia</li>
<li>Very rare (less than 0.01%): Lactic acidosis</li>
</ul></li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Gastrointestinal:
<ul>
<li>Very common (10% or more): Diarrhea (53.2%), nausea/vomiting (25.5%), flatulence (12.1%)</li>
<li>Common (1% to 10%): Indigestion, abdominal discomfort, abnormal stools, dyspepsia, loss of appetite</li>
</ul></li>
<li>Hematologic: Very rare (less than 0.01%): Subnormal vitamin B12 levels</li>
<li>Other: Common (1% to 10%): Asthenia, chills, flu syndrome, accidental injury</li>
<li>Hepatic: Very rare (less than 0.01%): Liver function test abnormalities, hepatitis</li>
<li>Cardiovascular: Common (1% to 10%): Chest discomfort, flushing, palpitation</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Dermatologic
<ul>
<li>Common (1% to 10%): Rash, nail disorder, increased sweating</li>
<li>Very rare (less than 0.01%): Erythema, pruritus, urticaria</li>
</ul></li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Endocrine: Frequency not reported: Reduction in thyrotropin (TSH) levels</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Immunologic: Very common (10% or more): Infection (20.5%)</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Musculoskeletal: Common (1% to 10%): Myalgia</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Nervous system: Common (1% to 10%): Lightheadedness, taste disturbances</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Psychiatric: Common (1% to 10%): Headache</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Respiratory: Common (1% to 10%): Rhinitis</li>
</ul>
</blockquote>
<p>Most of these seem to be relatively minor or temporary, and the GI problems can be reduced by splitting up doses &amp; taking with food; if they persist, a prophylactic user could simply discontinue metformin. (The <a href="http://www.fda.gov/ohrms/dockets/dailys/02/May02/053102/800471e6.pdf" title="Metformin Hydrochloride Tablets">FDA prescribing information</a> notes in one trial, 6% of the metformin subjects had to stop because the diarrhea was so bad. Net attrition/dropout rates in metformin studies vary so much that they’re not helpful and not all of it will have to do with metformin reducing the daily quality of life through side-effects, but overall they look like 10-40% would be a reasonable guess.) Discontinuation would be too bad since then one doesn’t gain the benefits, but one won’t have lost too much besides perhaps a few weeks of severe diarrhea and a month or two of wasted metformin pills, so it’s not <em>too</em> bad. You might think we would have to incorporate a penalty of 10-40% to the expected value - if there’s a 10-40% chance the metformin is useless, shouldn’t we multiply the mortality benefit by 0.1-0.4? - but that’s only if we have no way of knowing the metformin is useless and we are considering the scenario in which we take it for the rest of our life even while it’s useless. In this case, because we know quickly if we can handle metformin or not, we only need to consider the upfront cost of the month of diarrhea. (So more formally: the expected value is lower, but the Value of Information is higher because once one starts metformin and the GI problems either turn out to not be so bad or to go away, the expected value then increases substantially now that one knows one can take metformin without problem.)</p>
<p>The main side-effect mentioned as potentially fatal is <a href="http://en.wikipedia.org/wiki/lactic%20acidosis" title="Wikipedia: lactic acidosis">lactic acidosis</a> - for example, of the <a href="http://www.medsafe.govt.nz/profs/PUarticles/5.htm" title="Metformin and Fatal Lactic Acidosis">12 New Zealand cases 1977-1998, 8 were fatal</a> &amp; the FDA prescribing information estimates 50%, which does not sound fun. On the other hand, lactic acidosis seems to be an acute disorder whose primary effect would be killing you, so it should already be taken care of by working with a reduction in all-cause mortality (that is, even if you are more likely to die by lactic acidosis, the metformin must be sparing you even more gruesome deaths and on average it’s still helpful). And the lactic acidosis rates (2-9 per 100,000 person-years, so at 50 years of usage as prophylactic, a risk of 0.003) may simply reflect the pre-existing morbidity of diabetics and not caused by metformin, and so not a concern at all.</p>
<p>So for side-effects, I think we can sum it up as a month or two of diarrhea, which is unpleasant but not that big a deal. I wouldn’t pay more than $50/day or so to get rid of some diarrhea, which over two months is $3000, but that’s somewhat unlikely.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">metforminStartCost &lt;-<span class="st"> </span><span class="dv">3000</span>
metforminTotalCost &lt;-<span class="st"> </span>metforminStartCost +<span class="st"> </span>metforminAnnualCost *<span class="st"> </span><span class="kw">lifeExpectancy</span>(<span class="fl">0.85</span>, <span class="dv">30</span>, <span class="ot">Inf</span>)
metforminTotalCost</code></pre></div>
<pre><code>## [1] 9164.222</code></pre>
<p>&lt;$9.2k is a little under an order of magnitude smaller than the more conservative RR estimate, giving a gain of $69k for RR=0.85.</p>
</div>
</div>
<div id="cost-benefit-1" class="section level2">
<h2>Cost-benefit</h2>
<p>Bringing it all together for a 30yo considering metformin:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">benefit &lt;-<span class="st"> </span><span class="kw">lifeExpectancyGain</span>(<span class="fl">0.85</span>, <span class="dt">startingAge=</span><span class="dv">30</span>) *<span class="st"> </span>valueOfDALY *<span class="st"> </span>(<span class="dv">1</span>/<span class="dv">3</span>)
benefit -<span class="st"> </span>metforminTotalCost</code></pre></div>
<pre><code>## [1] 15812.74</code></pre>
<p>So metformin use is probably profitable for our 30yo.</p>
<div id="optimal-age-1" class="section level3">
<h3>Optimal age</h3>
<p>What about other ages? In fact, is there an optimal age at which to start, or should we be feeding little kids metformin too? Rewriting to generalize it, we can compute the profit for if we started at all ages:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">metforminPayoffs &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">ages =</span> <span class="dv">1</span>:<span class="dv">120</span>,
  <span class="dt">payoffs =</span> <span class="kw">sapply</span>(<span class="dv">1</span>:<span class="dv">120</span>, function(startingAge){
    <span class="kw">profitByAge</span>(<span class="dt">t=</span>startingAge, <span class="dt">RR=</span><span class="fl">0.85</span>,
      <span class="dt">yearValue=</span>valueOfDALY,
      <span class="dt">annualCost=</span>metforminAnnualCost,
      <span class="dt">startCost=</span>metforminStartCost,
      <span class="dt">probabilityPenalty=</span>(<span class="dv">1</span>/<span class="dv">3</span>))
    })
)
<span class="kw">plot_ly</span>(metforminPayoffs, <span class="dt">x=</span>~ages, <span class="dt">y=</span>~payoffs, <span class="dt">type=</span><span class="st">&quot;scatter&quot;</span>, <span class="dt">mode=</span><span class="st">&quot;lines&quot;</span>)</code></pre></div>
<div id="htmlwidget-35fd99170bc9022eac1e" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-35fd99170bc9022eac1e">{"x":{"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"ages"},"yaxis":{"domain":[0,1],"title":"payoffs"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"modeBarButtonsToRemove":["sendDataToCloud"]},"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],"y":[12581.3667818406,12704.6024716404,12827.5133145758,12950.0673438161,13072.2349739535,13193.9782237474,13315.259553024,13436.0355316177,13556.2597290187,13675.88249331,13794.8495919349,13913.1017478637,14030.574654542,14147.1987729678,14262.5684349069,14377.5931360764,14491.1934328757,14603.6041708708,14714.7221384661,14824.4977956695,14932.6251622992,15039.1603390149,15143.9017963724,15246.6992949798,15347.3913248511,15445.8084042209,15541.7525643296,15635.0363232079,15725.4423221472,15812.742462057,15896.6927401594,15977.0362205959,16053.4918210962,16125.7696999458,16193.5570440597,16256.5354880159,16314.322356848,16366.58143711,16412.9189728564,16452.9259909707,16486.1729564891,16512.2162349544,16530.5923283011,16540.8186155355,16542.3957583336,16534.8073937389,16517.5244111786,16490.0043769477,16451.6947782134,16402.0360876896,16340.4641839436,16266.4138575251,16179.3241482811,16078.641730132,15963.8265999016,15834.3574700004,15689.7379272861,15529.5033425799,15353.2277226793,15160.5310651815,14951.0872507896,14724.6321875903,14480.9719544723,14219.9909426827,13941.6599741525,13646.0441743661,13333.3103450544,13003.733736683,12657.7039314811,12295.7285088654,11918.4401962377,11526.5945354426,11121.0725473993,10702.8792522077,10273.1400610583,9833.09512729373,9384.09165549325,8927.57401956867,8465.07171100166,7998.18524841582,7528.57023588786,7057.91974618526,6587.94582834379,6120.35841825577,5656.84891652236,5199.06318619379,4748.58831275376,4306.93008014016,3875.49621237996,3455.58095504999,3048.34081949059,2654.8355703358,2275.91635711866,1912.32384345869,1564.63525304262,1233.27268148632,918.509217964932,620.473294139441,339.157247671286,74.426965826005,-173.966244414984,-406.373411182333,-623.233643549089,-825.062511015169,-1012.43660003929,-1185.98112738304,-1346.35743240049,-1494.25164330719,-1630.36275346213,-1755.39535283748,-1870.0491981009,-1975.01316138697,-2070.95896127777,-2158.53660863389,-2238.3703230188,-2311.05585076222,-2377.15851698367,-2437.21167794367,-2491.71755097193,-2541.14436643974],"mode":"lines","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y"}],"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p>Apparently there <em>is</em> an optimal age - and it’s not 30yo but 45yo (metformin is profitable enough that starting too early, rather than never, is still a good idea). So quite aside from waiting for better information like the MILES results, our hypothetical 30yo still should wait a long time before starting to use metformin. Also unsurprising is that ~90yo, mortality rates become so high that the metformin reduction yields such a small absolute gain of time that it can no longer offset the fixed absolute cost of metformin.</p>
<p>While $18k may not sound like that much on an individual level, it’s substantial (&lt;$1.42t over all people currently 55+) on a societal scale:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## multiply maximal benefit by the total number of
## Americans &gt;=55yo according to http://www.indexmundi.com/united_states/age_structure.html :
<span class="kw">max</span>(ages) *<span class="st"> </span>(<span class="dv">19309019</span> +<span class="st"> </span><span class="dv">20720284</span> +<span class="st"> </span><span class="dv">20304644</span> +<span class="st"> </span><span class="dv">25874360</span>)</code></pre></div>
<pre><code>## [1] 1.368577e+12</code></pre>
<p>The estimate is so small because we use a small estimate of the value of 1 QALY; <a href="http://www.med.mcgill.ca/epidemiology/courses/EPIB654/Summer2010/QALY/The_Economic_Value_of_Health.pdf" title="The Value of Health and Longevity">Murphy &amp; Topel 2005</a>, using a much more sophisticated calculation and more realistic QALY estimates, note that “A 10 percent reduction in all-cause mortality [RR=0.90] would have a present discounted social value of $18.5 trillion.”</p>
</div>
</div>
<div id="sensitivity-1" class="section level2">
<h2>Sensitivity</h2>
<p>We can also use the formula to ask how small (close to 1) the RR must be before, given the specified purchase &amp; side-effect costs, there is no longer any age at which metformin is profitable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">costToRR</span>(
  <span class="dt">startingAge=</span>optimalAge,
  <span class="dt">annualCost=</span>metforminAnnualCost,
  <span class="dt">startCost=</span>metforminStartCost,
  <span class="dt">probabilityPenalty=</span>(<span class="dv">1</span>/<span class="dv">3</span>)
)</code></pre></div>
<pre><code>## [1] 0.9386521</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># [1] 0.9520242072</span></code></pre></div>
<p>So if one doesn’t believe the true causal ACM RR is &lt;=0.95, then metformin use may not be advisable.</p>
</div>
<div id="tame-power-analysis" class="section level2">
<h2>TAME power analysis</h2>
<p>Using the previously defined <code>gompertzPower</code> function, we can ask a question like: assuming a clinical trial is investigating a claimed RR of 0.85, plans to enrol 3000 people aged 70yo, so presumably 1500 in each arm, and will followup for 5 years (a trial which bears a certain resemblance to plans for TAME); how often would the observed RR&lt;1.0?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df0<span class="fl">.85</span> &lt;-<span class="st"> </span><span class="kw">gompertzPower</span>(<span class="fl">0.85</span>, <span class="dv">1000</span>, <span class="dv">1000</span>, <span class="dv">50</span>, <span class="dv">10</span>, <span class="dv">100</span>)
<span class="kw">table</span>(df0<span class="fl">.85</span>$RR.observed&lt;<span class="fl">1.0</span>)</code></pre></div>
<p>Let’s consider something more plausible like the baby aspirin or some metformin estimates, an RR of 0.94:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df0<span class="fl">.94</span> &lt;-<span class="st"> </span><span class="kw">gompertzPower</span>(<span class="fl">0.94</span>, <span class="dv">1500</span>, <span class="dv">1500</span>, <span class="dv">70</span>, <span class="dv">5</span>, <span class="dv">1000</span>)
<span class="kw">table</span>(df0<span class="fl">.94</span>$RR.observed&lt;<span class="fl">1.0</span>)
    <span class="co"># FALSE  TRUE</span>
    <span class="co">#  236   764</span></code></pre></div>
<p>76% power is likewise still acceptable. But just because a clinical trials <em>plans</em> to enrol <em>n</em>=3000 doesn’t mean they will succeed, as there is always attrition, and attrition can be severe depending on how unpleasant the side-effects are; for metformin, for example, the attrition could easily be 30%:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df0.94attrit &lt;-<span class="st"> </span><span class="kw">gompertzPower</span>(<span class="fl">0.94</span>, <span class="dv">1500</span>*<span class="fl">0.70</span>, <span class="dv">1500</span>*<span class="fl">0.70</span>, <span class="dv">70</span>, <span class="dv">5</span>, <span class="dv">1000</span>)
<span class="kw">table</span>(df0.94attrit$RR.observed&lt;<span class="fl">1.0</span>)
    <span class="co"># FALSE  TRUE</span>
    <span class="co">#   254   746</span></code></pre></div>
<p>Knocking us back to 74%. So under more realistic assumptions about attrition and effect sizes, there’s a good chance that there would not be a correct signed result. Finally, we could consider the probability that we would get both a RR in the desired direction and the difference would be large enough to be statistically-significant at <em>p</em>&lt;0.05 when treated as a two-proportion problem:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>df0.94attrit
pvalues &lt;-<span class="st"> </span><span class="kw">sapply</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(df), function(i) {
  <span class="kw">prop.test</span>(
    <span class="kw">c</span>(df[i,]$N1.deaths, df[i,]$N2.deaths),
    <span class="kw">c</span>(df[i,]$N1, df[i,]$N2),
    <span class="dt">alternative=</span><span class="st">&quot;less&quot;</span>)$p.value 
})

<span class="kw">table</span>(pvalues&lt;=<span class="fl">0.05</span>)</code></pre></div>
<p>So it is highly unlikely (~10%) we could expect the realistic trial to deliver a statistically-significant reduction in mortality. (This lack of power for statistical-significance on ACM may be why the TAME investigators talk primarily about looking for reductions in cancer/heart attacks/strokes: as more common events than death, reductions will show up more clearly there, as they do in past metformin trials.) We don’t necessarily care about statistical-significance, since this is a decision-analysis approach: our question is whether the gained data shifts the posterior probability enough to change the optimal decision. But it’s good to have an idea of power in that sense to make it easier to interpret the research article &amp; media reports (eg the trial might be a ‘failure’ from the point of view of statistical-significance, even as it increases the profitability of using metformin).</p>
<p>If we really wanted 80% power for <em>p</em>&lt;0.05, how big a sample do we need? In this case, it turns out to be ~7500 per arm (after any attrition) or ~15k total.</p>
</div>
</div>
<div id="nicotinamide-riboside" class="section level1">
<h1>Nicotinamide Riboside</h1>
<p>The current supplement <em>du jour</em> for life-extension enthusiasts is called <a href="https://www.elysiumhealth.com/basis">Basis</a> by Elysium Health. Its backing is unusually good, but it hasn’t been subjected to any clinical testing (intentionally opting to go to market as a supplement in an attempt to side-step FDA regulation, which would take decades of testing and billions of dollars). Based on its list of scientific advisors, it may have sufficient theoretical support to be worth evaluating.</p>
<p>It’s composed of Nicotinamide Riboside (250mg/pill) and Pterostilbene (50mg/pill). However, they claim that the <a href="https://www.elysiumhealth.com/purity-guide">current batch’s doses</a> are more like 277mg/pill and 54mg/pill respectively.</p>
<p>It’s interesting to me in part because it is comparatively expensive. Elysium Health is selling a subscription model in which Basis may be purchased annually ($480), semi-annually ($45), monthly ($50), or a la carte ($60). These prices are, <a href="https://smile.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Daps&amp;field-keywords=Nicotinamide+Riboside">surprisingly</a> <a href="https://smile.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Daps&amp;field-keywords=Pterostilbene">competitive</a> with other supplement providers offering the same supplements at similar dosages.</p>
</div>
<div id="pterostilbene" class="section level1">
<h1>Pterostilbene</h1>
</div>
<div id="rapamycin" class="section level1">
<h1>Rapamycin</h1>
<p>Rapamycin is famous for life-extension results in animal experiments (especially mice), but the animal experiment environments may be unrealistic (raised under controlled, sometimes <a href="http://en.wikipedia.org/wiki/Specific-pathogen-free">Specific Pathogen Free</a> conditions) and rapamycin’s primary use in humans is as an immunosuppressant and has been linked with bad outcomes. Optimal dosage is unclear; at least one mice study found a higher dose did not extend lifespan as much while increasing certain cancer rates (<a href="https://elifesciences.org/content/5/e16351">Bitto et al 2016</a>). Rapamycin may never undergo clinical trials in healthy adult humans because the risks are too great, although animal trials such as <a href="http://www.nytimes.com/2016/05/17/us/aging-research-disease-dogs.html">a large-dog trial</a>, continue.</p>
</div>
<div id="bisphosphonates" class="section level1">
<h1>Bisphosphonates</h1>
<ul>
<li><a href="https://www.fightaging.org/archives/2011/02/bisphosphonates-and-an-unusual-longevity.php" class="uri">https://www.fightaging.org/archives/2011/02/bisphosphonates-and-an-unusual-longevity.php</a></li>
<li><a href="https://www.fightaging.org/archives/2015/12/more-investigation-of-bisphosphonates-and-reduced-mortality.php" class="uri">https://www.fightaging.org/archives/2015/12/more-investigation-of-bisphosphonates-and-reduced-mortality.php</a></li>
</ul>
</div>
<div id="alcohol" class="section level1">
<h1>Alcohol</h1>
<p>“A glass a day” has long been noted to correlate with longer life anywhere one looks, but the confounds for moderate responsible drinking are too noticeable to put much faith in it and the debate continues to rage. <a href="http://davidroodman.com/blog/2015/05/01/are-the-benefits-of-moderate-drinking-a-myth/">It’s troubling</a> that the economics literature seems to find health benefits to taxing alcohol, and that the more powerful <a href="http://en.wikipedia.org/wiki/Mendelian%20randomization">Mendelian randomization</a> design (while far from infallible) shows harm rather than benefit. But the real issue is that despite seeming like the easiest experiment ever to run (hand out free booze), there apparently are no randomized trials.</p>
</div>
<div id="caloric-restriction" class="section level1">
<h1>Caloric Restriction</h1>
<p>Caloric Restriction is promising, but current randomized studies are too short to show any effect on mortality (e.g. in <a href="http://biomedgerontology.oxfordjournals.org/content/70/9/1097.full">Ravussin et al 2015</a>. For example, no one died, so there is no all-cause mortality estimate.</p>
<p>For example, one primate study of caloric restriction found benefits only if it <a href="http://junkfoodscience.blogspot.com/2009/07/calorie-restrictive-eating-for-longer.html">excluded a bunch of deaths in the CR group</a> and defined them as not age-related, ignoring “monkeys who died while taking blood samples under anesthesia, from injuries or from infections, such as gastritis and endometriosis.” (Even in the <a href="http://www.nature.com/ncomms/2014/140401/ncomms4557/full/ncomms4557.html" title="&#39;Caloric restriction reduces age-related and all-cause mortality in rhesus monkeys&#39;, Colman et al 2015">followup paper</a> several years later, the all-cause mortality reduction is much smaller than the “age-related” subcategory.)</p>
</div>
<div id="castration" class="section level1">
<h1>Castration</h1>
<p>If you read that heading twice, Yeah, it means exactly what you think it means. Castration is <a href="http://lesswrong.com/lw/lm4/effects_of_castration_on_the_life_expectancy_of/">often reported</a> to increase longevity. However, we can’t be too certain about these reports. For one thing, studies of historical groups of eunuchs are inconsistent (e.g. PMID: 8232579) and often based on small sample sizes (n &lt; 100). Studies of dogs show <a href="http://www.straightdope.com/columns/read/3068/does-castration-longer-life">no large effect of castration</a>.</p>
<p>The best sort of study might be to do a Mendelian randomization for testosterone levels on a large cohort and see whether a lower genetic load for testosterone affects lifespan (adjusting for other genetic factors). This might be possible to do in the UK Biobank data, as testosterone MR studies have been done before (though I haven’t looked in detail into these studies). <a href="http://www.nature.com/articles/srep21306" class="uri">http://www.nature.com/articles/srep21306</a></p>
<p>But we could offhandedly reject it as impractical for a number of reasons: too serious a reduction in quality of life (<a href="http://en.wikipedia.org/wiki/Castration%23Medical%20consequences">going well beyond the loss of sex</a>), social ostracism, probably must be done before puberty for any benefits, may not be legal, not verified in any randomized trials (a concern because not all historical eunuch seem to show life expectancy gains; <a href="http://lesswrong.com/lw/lm4/effects_of_castration_on_the_life_expectancy_of/cogu">Egyptian eunuchs reportedly</a> had severe losses), and at least one of the proposed mechanisms may have lost efficacy in the modern setting (greater resistance to infectious diseases).</p>
<p>Moreover, there may be stronger hypotheses in measuring estrogen, or estrogen/testosterone ratios, or some other similar metric. Female mice tend to outlive male mice. However, <a href="http://onlinelibrary.wiley.com/doi/10.1111/acel.12496/full">treating male mice with estrogen leads to substantially longer lifespans</a> (a stronger effect than metformin). Solid research suggests that estrogen treatment in mice promotes stem cell self-renewal, which is a clear mechanism for how estrogen could promote lifespan (and explains its effects on multiple organ systems, including the immune system): <a href="http://www.nature.com/nature/journal/v505/n7484/full/nature12932.html" class="uri">http://www.nature.com/nature/journal/v505/n7484/full/nature12932.html</a></p>
</div>
<div id="coffee" class="section level1">
<h1>Coffee</h1>
<p>Being the kind of person who drinks coffee is really bad for you. But if you are, drinking 4-5 cups is good for you: <a href="http://www.nejm.org/doi/full/10.1056/NEJMoa1112010#t=article" class="uri">http://www.nejm.org/doi/full/10.1056/NEJMoa1112010#t=article</a>.</p>
</div>
<div id="links-for-future-investigation" class="section level1">
<h1>Links for Future Investigation</h1>
<p><strong>Other Evidence Roundups</strong></p>
<ul>
<li><a href="https://srconstantin.wordpress.com/2017/01/24/life-extension-possibilities/">Sarah Constantin’s <em>Life Extension Possibilities</em></a></li>
</ul>
<p><strong>Methodological</strong></p>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Micromort" title="Wikipedia: Micromort">Micromort</a></li>
<li><a href="https://en.wikipedia.org/wiki/Microlife">Microlife</a></li>
</ul>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-Cramer2013-xo">
<p>Cramer, Jan S, Rob Kaas, and Others. 2013. “Mortality Hazard Rates and Life Expectancy.” Universiteit van Amsterdam, Dept. of Econometrics; ase.uva.nl. <a href="http://ase.uva.nl/binaries/content/assets/subsites/amsterdam-school-of-economics/research/uva-econometrics/dp-2013/1303.pdf" class="uri">http://ase.uva.nl/binaries/content/assets/subsites/amsterdam-school-of-economics/research/uva-econometrics/dp-2013/1303.pdf</a>.</p>
</div>
<div id="ref-De_Grey2007-ac">
<p>Grey, Aubrey de, and Michael Rae. 2007. <em>Ending Aging: The Rejuvenation Breakthroughs That Could Reverse Human Aging in Our Lifetime</em>. St. Martin’s Press. <a href="https://market.android.com/details?id=book-vlBAKAESSg4C" class="uri">https://market.android.com/details?id=book-vlBAKAESSg4C</a>.</p>
</div>
<div id="ref-Olshansky1990-vd">
<p>Olshansky, S J, B A Carnes, and C Cassel. 1990. “In Search of Methuselah: Estimating the Upper Limits to Human Longevity.” <em>Science</em> 250 (4981): 634–40. <a href="http://www.ncbi.nlm.nih.gov/pubmed/2237414" class="uri">http://www.ncbi.nlm.nih.gov/pubmed/2237414</a>.</p>
</div>
<div id="ref-Werfel2015-zx">
<p>Werfel, Justin, Donald E Ingber, and Yaneer Bar-Yam. 2015. “Programed Death Is Favored by Natural Selection in Spatial Systems.” <em>Physical Review Letters</em> 114 (23). American Physical Society: 238103. doi:<a href="https://doi.org/10.1103/PhysRevLett.114.238103">10.1103/PhysRevLett.114.238103</a>.</p>
</div>
</div>
</div>
</div>


</div>

<div id="postamble" data-toggle="wy-nav-shift" class="status">
</div>


<script>
$(document).ready(function () {
 	  });
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
